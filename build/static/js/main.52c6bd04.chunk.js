(this.webpackJsonppwg_saas_client=this.webpackJsonppwg_saas_client||[]).push([[0],{285:function(e,t,n){e.exports=n(548)},290:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},291:function(e,t,n){},357:function(e,t,n){e.exports=n.p+"static/media/noImageFound.3a5a71c0.png"},548:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(0),c=n.n(r),i=n(12),o=n.n(i),l=n(37),u=n(78),s=n(18),d=n.n(s),m=n(9),f=n(19),p=n(86),g=n(23),b=(n(290),n(291),function(e){return c.a.createElement("div",{id:"layout_01"},c.a.createElement("div",{className:"wrapper layout_01-wrapper"},c.a.createElement("div",{className:"header"},e.header?e.header:null),c.a.createElement("div",{className:"content"},e.children?e.children:null,c.a.createElement("div",{className:"footer"},e.footer?e.footer:null))))}),v=n(57),h=(n(109),n(46)),O=(n(55),n(16)),y=(n(294),n(554)),E=n(555),j=(n(120),n(61)),k=n(553),w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={title:e&&"string"==typeof e?e.toUpperCase():"...",icon:c.a.createElement(k.a,null),content:t,okType:"danger",onCancel:function(){j.a.destroyAll()}};null!=n&&(a.onOk=n),j.a[e](a)},I=n(38);function x(){var e=Object(f.a)(["\n  query user {\n    user {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=Object(f.a)(["\n  query user {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return C=function(){return e},e}function _(){var e=Object(f.a)(["\n  query config {\n    config {\n      _id\n      configId\n      defaultImage\n      defaultImage_system\n      imageSrc\n      paymentQRImage\n      server\n      profile\n    }\n  }\n"]);return _=function(){return e},e}function S(){var e=Object(f.a)(["\n  query config {\n    config @client {\n      _id\n      configId\n      defaultImage\n      defaultImage_system\n      imageSrc\n      paymentQRImage\n      server\n      profile\n    }\n  }\n"]);return S=function(){return e},e}function N(){var e=Object(f.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return N=function(){return e},e}var P=n(357),$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;if(e){t=Object(I.a)({},e);var n=P;t.defaultImage&&""!=t.defaultImage&&(n=t.imageSrc+t.defaultImage),t.defaultImage=n}return t},q=(d()(N()),d()(S())),A=d()(_()),D=d()(C()),F=d()(x()),V=function(e){Jt.client.writeQuery({query:A,data:{config:$(e)}})},U=function(){var e=Object(g.d)(q,{fetchPolicy:"cache-only"}),t=e.data,n=e.error,a=(e.loading,null);return n&&console.log("useConfigCache",n),t&&t.config&&(a=t.config),a},M=function(e){Jt.client.writeQuery({query:F,data:{user:e}})},T=function(){var e=Object(g.d)(D,{fetchPolicy:"cache-only"}),t=e.data,n=e.error,a=(e.loading,null);return n&&console.log("useUserCache",n),t&&t.user&&(a=t.user),a};function B(){var e=Object(f.a)(["\n  {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return B=function(){return e},e}function z(){var e=Object(f.a)(["\n    mutation logout {\n      logout {\n        success\n        message\n        data\n      }\n    }\n"]);return z=function(){return e},e}var L=d()(z()),R=(d()(B()),function(e){var t,n=Object(g.a)(),a=Object(p.k)(),i=U(),o=Object(g.c)(L,{onCompleted:function(t){if(t&&t.logout&&t.logout.success){n.resetStore().then((function(){e.setLoggedIn(!1),a.push("/login")}))}}}),l=Object(m.a)(o,1)[0],u=Object(r.useState)(!1),s=Object(m.a)(u,2),d=s[0],f=s[1],b=[{name:"Inventory",icon:null,route:"/"},{name:"Orders",icon:null,route:"/orders"}];return c.a.createElement("header",{id:"header_01","data-header-collapsed":d},c.a.createElement("div",{className:"header_01-header"},c.a.createElement("div",{className:"header_01-item collapse-btn"},c.a.createElement(O.a,(t={shape:"circle",type:"link"},Object(v.a)(t,"shape","circle"),Object(v.a)(t,"icon",c.a.createElement(y.a,{rotate:d?180:0})),Object(v.a)(t,"onClick",d?function(){f(!1)}:function(){f(!0)}),t)))),c.a.createElement("div",{className:"header_01-content"},function(){var e=[];return b.map((function(t,n){var r={shape:"circle"};d?r.shape="circle":r.type="link",e.push(c.a.createElement("div",{className:"header_01-item ".concat(a.location.pathname==t.route?"header_01-activeLink":""),key:n,onClick:function(){a.push(t.route)}},d?c.a.createElement(h.a,{title:t.name,placement:"right"},c.a.createElement(O.a,r,t.name[0].toUpperCase())):c.a.createElement("span",{className:a.location.pathname==t.route?"header_01-activeLink":""},t.name)))})),e}()),c.a.createElement("div",{className:"header_01-footer"},i&&!d?c.a.createElement("div",{className:"header_01-item",style:{cursor:"default"}},i.profile.name):null,c.a.createElement("div",{className:"header_01-item",onClick:function(){w("confirm","Confirm Logout?",(function(){l()}))}},d?c.a.createElement(h.a,{title:"Logout",placement:"right"},c.a.createElement(O.a,{shape:"circle",icon:c.a.createElement(E.a,null)})):c.a.createElement("span",null,"Logout"))))}),J=(n(360),n(279),n(362),n(283),n(556),n(557),n(210),n(94)),K=(n(180),n(29)),W=(n(127),n(40)),Q=n(558),G=function(e){var t=Object(r.useState)(!0),n=Object(m.a)(t,2),a=n[0];n[1];return a?c.a.createElement("div",{className:"loading"},c.a.createElement(Q.a,null)):null},H=(n(368),n(278));function X(){var e=Object(f.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return X=function(){return e},e}function Y(){var e=Object(f.a)(["\n    mutation login($user: JSONObject) {\n      login(user: $user) {\n        success\n        message\n        data\n      }\n    }\n"]);return Y=function(){return e},e}var Z=d()(Y()),ee=d()(X()),te={labelCol:{span:8},wrapperCol:{span:16}},ne={wrapperCol:{offset:8,span:16}},ae=function(e){Object(p.k)();var t=Object(g.c)(Z,{onCompleted:function(e){if(e&&e.login&&e.login.success){u({variables:{configId:e.login.data.configId}})}else!function(e){var t=e.type,n=e.message;e.description;H.a[t]({message:n})}({type:"error",message:"Failed to login"})}}),n=Object(m.a)(t,2),a=n[0],r=n[1],i=r.data,o=r.loading,l=Object(g.b)(ee,{fetchPolicy:"cache-and-network",onCompleted:function(e){e&&e.userConfig&&e.userConfig.success&&(V(e.userConfig.data),M(i.login))}}),u=Object(m.a)(l,1)[0];return c.a.createElement("div",{id:"page_login"},c.a.createElement(K.a,Object.assign({},te,{name:"basic",initialValues:{remember:!0},onFinish:function(e){a({variables:{user:e}})},onFinishFailed:function(e){console.log("Failed:",e)}}),c.a.createElement(K.a.Item,{label:"\u8d26\u53f7",name:"username",rules:[{required:!0,message:"Please input your username!"}]},c.a.createElement(W.a,null)),c.a.createElement(K.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.a.createElement(W.a.Password,null)),c.a.createElement(K.a.Item,Object.assign({},ne,{name:"remember",valuePropName:"checked"}),c.a.createElement(J.a,null,"Remember me")),c.a.createElement(K.a.Item,ne,c.a.createElement(O.a,{type:"primary",htmlType:"submit"},"\u767b\u5165"))),o?c.a.createElement(G,null):null)},re=(n(133),n(88),n(550),n(277)),ce=function(e){e.children;var t=Object(a.a)(e,["children"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{id:"page_01"},c.a.createElement(re.a,t,e.children)))},ie=n(561),oe=(n(551),n(276)),le=(n(230),n(154)),ue=(n(231),n(106)),se=n(107),de=n(27),me=n.n(de),fe=n(44),pe=(n(232),n(85)),ge=(n(473),n(193)),be=n(560),ve=n(559),he=(n(187),n(84)),Oe=n(282),ye=(n(243),n(119)),Ee=(n(480),n(194)),je=n(562),ke=n(563),we=n(564),Ie=n(260),xe=n.n(Ie),Ce=W.a.Search,_e=c.a.createContext(),Se=function(e){e.index;var t=Object(a.a)(e,["index"]),n=K.a.useForm(),r=Object(m.a)(n,1)[0];return c.a.createElement(K.a,{form:r,component:!1},c.a.createElement(_e.Provider,{value:r},c.a.createElement("tr",t)))},Ne=function(e){var t=e.title,n=e.editable,i=e.children,o=e.dataIndex,l=e.record,u=e.handleSave,s=e.isVariant,d=void 0!==s&&s,f=Object(a.a)(e,["title","editable","children","dataIndex","record","handleSave","isVariant"]),p=Object(r.useState)(!1),g=Object(m.a)(p,2),b=g[0],h=g[1],O=Object(r.useRef)(),y=Object(r.useContext)(_e);Object(r.useEffect)((function(){b&&O.current.focus()}),[b]);var E=function(){h(!b),y.setFieldsValue(Object(v.a)({},o,l[o]))},j=function(){var e=Object(fe.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.validateFields();case 3:n=e.sent,E(),u(Object(I.a)({},l,{},n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=i;return d?k=b?c.a.createElement(K.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o},c.a.createElement(W.a,{ref:O,onPressEnter:j,onBlur:j})):c.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E},i):n&&(k=b?c.a.createElement(K.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o,rules:[{required:!0,message:"".concat(t," is required.")}]},"price"==o?c.a.createElement(Ee.a,{ref:O,min:0,step:1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onPressEnter:j,onBlur:j}):"stock"==o?c.a.createElement(Ee.a,{ref:O,min:0,step:1,onPressEnter:j,onBlur:j}):c.a.createElement(W.a,{ref:O,onPressEnter:j,onBlur:j})):c.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E},i)),c.a.createElement("td",f,k)},Pe=function(e){var t=e.productId,n=e.inventoryData,i=e.setInventoryData,o=e.productVariants,l=e.setProductVariants,u=Object(r.useState)([]),s=Object(m.a)(u,2),d=(s[0],s[1],Object(r.useState)(!1)),f=Object(m.a)(d,2),p=f[0],g=f[1],b=K.a.useForm(),y=Object(m.a)(b,1)[0],E=function(e){o[e];var t=Object(a.a)(o,[e].map(Oe.a));l(t);var r=n.map((function(t){return delete t[e],t}));i(r)},k=function(e,t,a){a.preventDefault();var r=n.map((function(e){return e.key})).indexOf(e.key);i(xe()(n,Object(v.a)({},r,{published:{$set:t}})))},w=function(e){i(n.filter((function(t){return t.key!==e})))},x=function(e){var t=Object(se.a)(n),a=t.findIndex((function(t){return e.key===t.key})),r=t[a];t.splice(a,1,Object(I.a)({},r,{},e)),i(t)},C={body:{row:Se,cell:Ne}},_=function(){var e=[],t=Object.keys(o),a=[{title:"Price",dataIndex:"price",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.price-t.price}},{title:"Stock",dataIndex:"stock",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.stock-t.stock}},{title:"Published",dataIndex:"published",width:100,fixed:"right",align:"center",render:function(e,t){return c.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},c.a.createElement(le.a,{checkedChildren:"Active",unCheckedChildren:"Inactive",checked:t.published,onChange:function(e,n){k(t,e,n)}}))}},{title:c.a.createElement(h.a,{title:"New Variant"},c.a.createElement(O.a,{onClick:function(){g(!0)},block:!0,type:"link",icon:c.a.createElement(ie.a,null),disabled:!(t.length<4)})),dataIndex:"operation",width:50,align:"center",fixed:"right",render:function(e,t){return n.length>=1?c.a.createElement(ye.a,{title:"Sure to delete?",onConfirm:function(){return w(t.key)}},c.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},c.a.createElement(je.a,null))):null}}];return t&&t.length>0&&t.map((function(t){e.push({title:o[t],dataIndex:t,editable:!0,isVariant:!0,width:150,ellipsis:!0,sorter:function(e,n){return e[t]>n[t]?-1:n[t]>e[t]?1:0},filterIcon:c.a.createElement(ke.a,null),filterDropdown:function(e){return c.a.createElement("div",{style:{padding:"10px",display:"flex"}},e.visible?c.a.createElement(c.a.Fragment,null,c.a.createElement(Ce,{enterButton:c.a.createElement(we.a,null),defaultValue:o[t],onSearch:function(n){return function(n){e.confirm(),l(Object(I.a)({},o,Object(v.a)({},t,n)))}(n)}}),c.a.createElement(ye.a,{title:"Sure to delete?",onConfirm:function(){e.confirm(),E(t)}},c.a.createElement(O.a,{type:"danger",icon:c.a.createElement(je.a,null),style:{marginLeft:"5px"}}))):null)},onFilter:function(){console.log("on filter ok")}})})),e.concat(a)}().map((function(e){return e.editable?Object(I.a)({},e,{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,isVariant:e.isVariant,handleSave:x}}}):e}));return c.a.createElement("div",{className:"inventoryTable-main"},c.a.createElement(O.a,{onClick:function(){var e={key:(new Date).getTime(),_id:null,price:0,stock:0,published:!1,productId:t};if(n.length>0){var r=n[n.length-1],c=(r.key,r._id,r.published,Object(a.a)(r,["key","_id","published"]));e=Object(I.a)({},e,{},c)}i([].concat(Object(se.a)(n),[e]))},type:"primary",style:{marginRight:16,marginBottom:16},disabled:!(n.length<20),icon:c.a.createElement(ie.a,null)},"Item"),c.a.createElement(he.a,{components:C,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:n,columns:_,size:"small",pagination:!1,scroll:{x:150*(_.length-4)}}),c.a.createElement(K.a,{form:y},c.a.createElement(j.a,{title:"New Variant",width:300,bodyStyle:{paddingBottom:0},visible:p,onOk:function(){var e=y.getFieldValue();if(e&&e.variantName){var t="v"+(new Date).getTime();l(Object(I.a)({},o,Object(v.a)({},t,e.variantName))),y.resetFields()}g(!1)},onCancel:function(){g(!1)}},c.a.createElement(K.a.Item,{name:"variantName",rules:[{required:!0,message:"Name is required."}]},c.a.createElement(W.a,{maxLength:8})))))},$e=n(162),qe=n(87),Ae=n(280),De=n(281);function Fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Ae.a({addTypename:!1}),n=new qe.c({cache:t,link:new De.a({uri:e||"http://13.124.162.243/graphql",credentials:"include"})});return{client:n,cache:t,query:function(){var e=Object(fe.a)(me.a.mark((function e(t){var a,r=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.query({variables:a,query:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mutation:function(){var e=Object(fe.a)(me.a.mark((function e(t){var a,r=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.mutate({variables:a,mutation:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}function Ve(){var e=Object(f.a)(["\n  mutation qiniuBatchDelete($images: [String!]) {\n    qiniuBatchDelete(images: $images) {\n      success\n      message\n      data\n    }\n  }\n"]);return Ve=function(){return e},e}function Ue(){var e=Object(f.a)(["\n  {\n    qiniuToken {\n      success\n      message\n      data\n    }\n  }\n"]);return Ue=function(){return e},e}function Me(){var e=Object(f.a)(["\n  {\n    qiniu @client {\n      success\n      message\n      data\n    }\n  }\n"]);return Me=function(){return e},e}d()(Me());var Te=d()(Ue()),Be=d()(Ve()),ze=function(){var e=Object(fe.a)(me.a.mark((function e(){var t,n,a,r=arguments;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(r.length>0&&void 0!==r[0])||r[0],n=Fe(),a="",!t){e.next=7;break}return e.next=6,n.query(Te).then((function(e){return e})).catch((function(e){}));case 6:a=e.sent;case 7:return e.abrupt("return",{upload:function(){var e=Object(fe.a)(me.a.mark((function e(t){var n,r,c,i;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.originFileObj,r={useCdnDomain:!0,region:$e.region.z0},c={fname:"",params:{},mimeType:["image/png","image/jpeg","image/gif"]},i=t.name,e.abrupt("return",new Promise((function(e,t){if(a){var o=a.data.qiniuToken;if(o.success){var l=o.data;$e.upload(n,i,l,c,r).subscribe({next:function(e){console.log("next(res)",e)},error:function(e){console.log("error(err)",e),t(e)},complete:function(t){console.log("complete(res)",t),e(t)}})}}else t("Error getting token")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),batchDelete:function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n.mutation(Be,{images:t}).then((function(t){return e(t)})).catch((function(e){console.log(e),a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),imageMogr2:function(e,t,n){return $e.imageMogr2(e,t,n)}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Le(){var e=Object(f.a)(["\n  mutation updateProduct($product: JSONObject!) {\n    updateProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return Le=function(){return e},e}function Re(){var e=Object(f.a)(["\n  mutation deleteProduct($_id: String!) {\n    deleteProduct(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return Re=function(){return e},e}function Je(){var e=Object(f.a)(["\n  mutation createProduct($product: JSONObject!) {\n    createProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return Je=function(){return e},e}function Ke(){var e=Object(f.a)(["\n  mutation bulkUpdateInventory($inventory: [JSONObject!]) {\n    bulkUpdateInventory(inventory: $inventory) {\n      success\n      message\n      data\n    }\n  }\n"]);return Ke=function(){return e},e}function We(){var e=Object(f.a)(["\n  query inventory($filter: JSONObject) {\n    inventory(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return We=function(){return e},e}var Qe=ge.a.Panel,Ge=pe.a.Option,He=d()(We()),Xe=d()(Ke()),Ye=d()(Je()),Ze=d()(Re()),et=d()(Le()),tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],a=[],r=[],c=[];return t.map((function(e,t){var r=e.name;if(e.originFileObj){var i=r.split(".");r="saas_".concat(t,"_").concat((new Date).getTime(),"_").concat(i[i.length-2],".").concat(i[i.length-1]),e.name=r,n.push(e)}else a.push(e);c.push({name:r,fav:!!e.fav&&e.fav})})),e.map((function(e){a.map((function(e){return e.name})).indexOf(e.name)<0&&r.push(e)})),{upload:n,delete:r,allImages:c,uploaded:e}};function nt(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var at=function(e){var t=e.product,n=void 0===t?null:t,i=e.categories,o=e.refetch,l=Object(a.a)(e,["product","categories","refetch"]),u=U(),s=K.a.useForm(),d=Object(m.a)(s,1)[0],f=Object(r.useState)([]),p=Object(m.a)(f,2),b=p[0],v=p[1],h=Object(r.useState)(!1),y=Object(m.a)(h,2),E=y[0],k=y[1],x=Object(r.useState)(null),C=Object(m.a)(x,2),_=C[0],S=C[1],N=Object(r.useState)([]),P=Object(m.a)(N,2),$=P[0],q=P[1],A=Object(r.useState)(i),D=Object(m.a)(A,2),F=D[0],V=D[1],M=Object(r.useState)(""),T=Object(m.a)(M,2),B=T[0],z=T[1],L=Object(r.useState)({sku:"SKU"}),R=Object(m.a)(L,2),J=R[0],Q=R[1];Object(r.useEffect)((function(){if(n&&l.modalVisible){var e=Object.assign({},n);if(n.category&&n.category.length>0){var t=n.category.map((function(e){return{key:e._id,label:e.name}}));e.category=t}d.setFieldsValue(e),n.variants&&Q(n.variants),ee({variables:{filter:{filter:{productId:n._id}}}}),n.images&&n.images.length>0&&v(function(e,t){var n=t.imageSrc;return e.map((function(e){return e.uid=e.name,e.url=n+e.name,e.thumbUrl=n+e.name,e.fav,e}))}(n.images,u))}else d.resetFields();l.setModalFooter(Ce())}),[n,l.modalVisible]);var G=c.a.createElement("div",null,c.a.createElement(ie.a,null),c.a.createElement("div",{className:"ant-upload-text"},"Upload")),H=function(){var e=[].concat(b);e.map((function(e){return e.name==_.name?e.fav=!0:e.fav=!1,e})),v(e)},X=function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,nt(t.originFileObj);case 3:t.preview=e.sent;case 4:k(!0),S(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=Object(g.b)(He,{fetchPolicy:"cache-and-network",onCompleted:function(e){if(e&&e.inventory){var t=[];e.inventory.map((function(e,n){var r=e.variants,c=Object(a.a)(e,["variants"]),i=Object(I.a)({},c,{},r,{key:c._id});t.push(i)})),q(t)}}}),Z=Object(m.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(g.c)(Xe,{onCompleted:function(e){}}),ae=Object(m.a)(ne,1)[0],re=Object(g.c)(Ye,{onCompleted:function(e){l.onCancel(),o()}}),ce=Object(m.a)(re,2),de=ce[0],he=(ce[1],Object(g.c)(Ze,{onCompleted:function(e){l.onCancel(),o()}})),Oe=Object(m.a)(he,1)[0],ye=Object(g.c)(et,{onCompleted:function(e){l.onCancel(),o()}}),Ee=Object(m.a)(ye,2),je=Ee[0],ke=(Ee[1],function(){var e=Object(fe.a)(me.a.mark((function e(t){var r,c,i,o,l,u;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(I.a)({},t,{images:[],variants:J}),t._id||delete r._id,t.category?(c=F.find((function(e){return e._id==t.category.key})))&&(r.category=[c]):r.category=[],i=tt(n&&n.images?n.images:[],b),r.images=i.allImages,e.next=7,ze();case 7:if(o=e.sent,i.upload.length>0&&i.upload.map(function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.upload(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!(i.delete.length>0)){e.next=12;break}return e.next=12,o.batchDelete(i.delete.map((function(e){return e.name})));case 12:n?(je({variables:{product:Object(I.a)({},r,{_id:n._id})}}),l=(l=Object(se.a)($)).map((function(e){e.key;var t=Object(a.a)(e,["key"]),n={};return Object.keys(J).map((function(e){t.hasOwnProperty(e)&&(n[e]=t[e],delete t[e])})),t.variants=n,t})),u=[],te.data&&te.data.inventory&&te.data.inventory.map((function(e){l.map((function(e){return e._id})).indexOf(e._id)<0&&u.push(Object(I.a)({},e,{deleted:!0}))})),ae({variables:{inventory:l.concat(u)}})):de({variables:{product:r}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),we=function(){w("confirm","Confirm delete?",Object(fe.a)(me.a.mark((function e(){var t;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.images&&n.images.length>0)){e.next=6;break}return e.next=3,ze();case 3:return t=e.sent,e.next=6,t.batchDelete(n.images.map((function(e){return e.name})));case 6:Oe({variables:{_id:n._id}});case 7:case"end":return e.stop()}}),e)}))))},Ie=function(e){z(e.target.value)},xe=function(){B&&""!=B&&(V([].concat(Object(se.a)(F),[{_id:"category_".concat(B,"_").concat((new Date).getTime()),name:B}])),z(""))},Ce=function(){var e=[c.a.createElement(O.a,{key:"cancel",onClick:l.onCancel},"Cancel"),c.a.createElement(O.a,{key:"submit",type:"primary",onClick:function(){d.submit()}},"Save")];return n&&e.unshift(c.a.createElement(O.a,{key:"delete",type:"danger",onClick:we},"Delete")),e};return c.a.createElement("div",{id:"productForm"},c.a.createElement(ge.a,{defaultActiveKey:["1","2"],expandIconPosition:"right"},c.a.createElement(Qe,{header:"Product Information",key:"1"},c.a.createElement(K.a,{name:"complex-form",form:d,onFinish:ke,labelCol:{span:5},wrapperCol:{span:16}},n?null:c.a.createElement(K.a.Item,{name:"_id",label:"ID"},c.a.createElement(W.a,null)),c.a.createElement(K.a.Item,{name:"name",label:"Name",rules:[{required:!0}]},c.a.createElement(W.a,null)),c.a.createElement(K.a.Item,{name:"description",label:"Description"},c.a.createElement(W.a.TextArea,{rows:4})),c.a.createElement(K.a.Item,{name:"category",label:"Category"},c.a.createElement(pe.a,{style:{width:240},placeholder:"Select a category",labelInValue:!0,allowClear:!0,dropdownRender:function(e){return c.a.createElement("div",null,e,c.a.createElement(ue.a,{style:{margin:"4px 0"}}),c.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},c.a.createElement(W.a,{style:{flex:"auto"},value:B,onChange:Ie,required:!0}),c.a.createElement(O.a,{type:"link",icon:c.a.createElement(ie.a,null),onClick:xe,disabled:""==B},"New")))}},F.map((function(e,t){return c.a.createElement(Ge,{key:t,value:e._id},e.name)})))),c.a.createElement(K.a.Item,{name:"published",label:"Published",valuePropName:"checked"},c.a.createElement(le.a,{checkedChildren:"Active",unCheckedChildren:"Inactive"})),c.a.createElement(K.a.Item,{name:"images",label:"Images"},c.a.createElement(c.a.Fragment,null,c.a.createElement(oe.a,{accept:"image/*",beforeUpload:function(e){return!1},listType:"picture-card",multiple:!0,fileList:b,onPreview:X,onChange:function(e){var t=e.fileList,n=(Object(a.a)(e,["fileList"]),t.map((function(e){return e.fav,e})));(t.length>4&&(n=t.slice(0,3)),n.length>0)&&(n.find((function(e){return e.fav}))||(n[0].fav=!0));v(n)},className:"productForm-upload"},b.length<4?G:null),c.a.createElement(j.a,{visible:E,footer:function(){var e=_&&_.fav;return c.a.createElement(O.a,{type:e?"primary":"default",icon:e?c.a.createElement(be.a,{style:{color:"gold"}}):c.a.createElement(ve.a,null),onClick:H},"Favourite")}(),onCancel:function(){k(!1)}},c.a.createElement("img",{alt:"preview: ".concat(_?_.name:""),style:{width:"100%"},src:_?_.url||_.thumbUrl:""})))))),n?c.a.createElement(Qe,{header:"Pricing & Variants",key:"2"},c.a.createElement(Pe,{productId:n._id,inventoryData:$,setInventoryData:q,productVariants:J,setProductVariants:Q})):null))},rt=function(e){var t=e.product,n=e.categories,a=void 0===n?[]:n,i=e.modalVisible,o=e.refetch,l=e.closeModal,u=Object(r.useState)([]),s=Object(m.a)(u,2),d=s[0],f=s[1],p={};return d&&(p.footer=d),c.a.createElement(j.a,Object.assign({title:t?t.name:"New Product",width:"95%",visible:i,onCancel:l,destroyOnClose:!0,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},p),c.a.createElement(at,{product:t,categories:a,refetch:o,modalVisible:i,onCancel:l,setModalFooter:f}))},ct=(n(242),n(108));function it(){var e=Object(f.a)(["\n  query products($filter: JSONObject) {\n    products(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return it=function(){return e},e}d()(it());var ot=n(552);function lt(){var e=Object(f.a)(["\n  mutation updateInventoryPublish($ids: [String!], $published: Boolean!) {\n    updateInventoryPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return lt=function(){return e},e}function ut(){var e=Object(f.a)(["\n  mutation updateProductPublish($ids: [String!], $published: Boolean!) {\n    updateProductPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return ut=function(){return e},e}function st(){var e=Object(f.a)(["\n  query inventory($filter: JSONObject) {\n    inventory(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return st=function(){return e},e}function dt(){var e=Object(f.a)(["\n  query products($filter: JSONObject) {\n    products(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return dt=function(){return e},e}var mt=d()(dt()),ft=d()(st()),pt=d()(ut()),gt=d()(lt()),bt=function(e){var t=[];return e.map((function(e){e.category&&e.category.length>0&&e.category.map((function(e){t.find((function(t){return t._id==e._id}))||t.push(e)}))})),t},vt=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),l=Object(m.a)(o,2),u=l[0],s=l[1],d=Object(r.useState)([]),f=Object(m.a)(d,2),p=f[0],b=f[1],v=Object(r.useState)(!1),h=Object(m.a)(v,2),y=h[0],E=h[1],j=Object(g.d)(mt,{fetchPolicy:"cache-and-network",variables:{},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),k=j.data,w=(j.loading,j.error),x=j.refetch,C=Object(g.d)(ft,{fetchPolicy:"cache-and-network",onError:function(e){console.log("inventoryData error",e)},onCompleted:function(e){}}),_=C.data,S=(C.loading,C.error),N=C.refetch,P=Object(g.c)(pt,{onCompleted:function(e){x()}}),$=Object(m.a)(P,1)[0],q=Object(g.c)(gt,{onCompleted:function(e){N()}}),A=Object(m.a)(q,1)[0];Object(r.useEffect)((function(){p.length>0?y||E(!0):y&&E(!1)}),[p.length]);var D=function(e){i(!0),s(e)},F=[{title:"No.",dataIndex:"index",width:75,render:function(e,t,n){return n+1+"."}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(ot.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Name",dataIndex:"name",render:function(e,t){var n=t.name?c.a.createElement(O.a,{type:"link",onClick:function(){D(t)}},t.name):null;if(!n){var a="";if(t.variants){var r=Object.keys(t.variants);r.map((function(e,n){a+="".concat(t.variants[e]," ").concat(n==r.length-1?"":"/ ")}))}else a="-";n=a}return n}},{title:"Price",dataIndex:"price",render:function(e,t){var n=t.price;return n||(n="-"),n}},{title:"Stock",dataIndex:"stock",sorter:function(e,t){return e.stock&&t.stock?e.stock-t.stock:0},render:function(e,t){var n=t.stock;if(!n)if(t.children&&t.children.length>0){var a=0;t.children.map((function(e){a+=e.stock})),n=a}else n="-";return n}},{title:"Published",dataIndex:"published",render:function(e,t){return t.published?c.a.createElement(ct.a,{color:"green"},"Active"):c.a.createElement(ct.a,{color:"red"},"Inactive")}}],V={onChange:function(e,t){b(t)},onSelect:function(e,t,n){},onSelectAll:function(e,t,n){}};p.length;return c.a.createElement(ce,{title:"Inventory",extra:[c.a.createElement(O.a,{key:"create",type:"primary",icon:c.a.createElement(ie.a,null),onClick:function(){D(null)}})]},c.a.createElement(he.a,{columns:F,rowSelection:V,dataSource:function(){var e=[];if(k&&_&&!w&&!S){var t=_.inventory.map((function(e){return Object(I.a)({},e,{key:e._id})}));k.products.map((function(n,a){var r=t.filter((function(e){return e.productId==n._id}));n.key=n._id,r.length>0&&(n.children=r),e.push(n)}))}return e}(),pagination:!1,scroll:{x:150*F.length},size:"small"}),c.a.createElement("div",{className:"inventory-selectionPanel ".concat(y?"open":"close")},function(){var e=[],t=[];p.map((function(n){n.productId&&""!=n.productId?e.push(n._id):t.push(n._id)}));return c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(O.a,{type:"primary",size:"small",onClick:function(){e.length>0&&A({variables:{ids:e,published:!0}}),t.length>0&&$({variables:{ids:t,published:!0}})},style:{marginRight:"5px"},disabled:!y},"Publish"),c.a.createElement(O.a,{size:"small",onClick:function(){e.length>0&&A({variables:{ids:e,published:!1}}),t.length>0&&$({variables:{ids:t,published:!1}})},disabled:!y},"Unpublish"))}()),c.a.createElement(rt,{product:u,categories:k&&k.products?bt(k.products):[],refetch:function(){x(),N()},modalVisible:a,closeModal:function(){i(!1)}}))},ht=(n(540),n(192)),Ot=(n(542),n(67)),yt=(n(544),n(163)),Et=(n(228),n(152)),jt=function(e){var t=e.order,n=e.closeModal,r=e.visible,i=(Object(a.a)(e,["order","closeModal","visible"]),U());return c.a.createElement(j.a,{title:"Order",width:"95%",visible:r,onCancel:n,footer:null,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(ue.a,{orientation:"left"},"\u8ba2\u5355"),c.a.createElement(Ot.a,{size:"small",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:1,xs:1}},c.a.createElement(Ot.a.Item,{label:"\u7f16\u53f7"},t._id),c.a.createElement(Ot.a.Item,{label:"\u8ba2\u8d2d\u65e5\u671f"},Object(ot.a)(new Date(t.createdAt),"MM/dd/yyyy hh:mm:ss aa")),c.a.createElement(Ot.a.Item,{label:"\u4ed8\u6b3e\u72b6\u6001"},t.paid?c.a.createElement("span",{style:{color:"green"}},"\u5df2\u4ed8\u6b3e"):c.a.createElement("span",{style:{color:"red"}},"\u5f85\u4ed8\u6b3e")),c.a.createElement(Ot.a.Item,{label:"\u8d27\u7269\u72b6\u6001"},t.sentOut?c.a.createElement("span",{style:{color:"green"}},"\u5df2\u51fa\u8d27 ",c.a.createElement("small",null," (\u8fd0\u5355\u53f7: ",t.trackingNum,")")):c.a.createElement("span",{style:{color:"red"}},"\u672a\u51fa\u8d27"))),c.a.createElement(ue.a,{orientation:"left"},"\u6536\u4ef6\u4eba"),c.a.createElement(Ot.a,{id:"buyerInfoTable",size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},c.a.createElement(Ot.a.Item,{label:"\u540d\u5b57"},t.customer.name),c.a.createElement(Ot.a.Item,{label:"\u7535\u8bdd\u53f7\u7801"},"contact"),c.a.createElement(Ot.a.Item,{label:"\u6536\u4ef6\u5730\u5740"},"address")),c.a.createElement(ue.a,{orientation:"left"},"\u8d2d\u4e70\u5217\u8868"),c.a.createElement(yt.a,{itemLayout:"horizontal",dataSource:t.items,renderItem:function(e){var t=e.product.name,n="",a=Object.keys(e.variant);a.map((function(t,r){n+="".concat(t,": ").concat(e.variant[t]).concat(r==a.length-1?"":", ")}));var r="";return i&&e.product.image&&(r=i.imageSrc+e.product.image),c.a.createElement(yt.a.Item,{actions:["qty: "+e.qty,"price: "+e.price]},c.a.createElement(yt.a.Item.Meta,{avatar:c.a.createElement(Et.a,{shape:"square",src:r}),title:t,description:n}))},footer:c.a.createElement("div",{className:"orderInfo-item-summary"},"Total: ",t.total)})):"Not found")};function kt(){var e=Object(f.a)(["\n  mutation cancelOrder($_id: String!) {\n    cancelOrder(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return kt=function(){return e},e}function wt(){var e=Object(f.a)(["\n  mutation updateOrderDelivery($_id: String!, $trackingNum: String) {\n    updateOrderDelivery(_id: $_id, trackingNum: $trackingNum) {\n      success\n      message\n      data\n    }\n  }\n"]);return wt=function(){return e},e}function It(){var e=Object(f.a)(["\n  mutation updateOrderPayment($_id: String!, $paid: Boolean!) {\n    updateOrderPayment(_id: $_id, paid: $paid) {\n      success\n      message\n      data\n    }\n  }\n"]);return It=function(){return e},e}function xt(){var e=Object(f.a)(["\n  query orders($filter: JSONObject) {\n    orders(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      items\n      total\n      customer\n      paid\n      sentOut\n      trackingNum\n    }\n  }\n"]);return xt=function(){return e},e}var Ct=ht.a.TabPane,_t=W.a.Search,St=d()(xt()),Nt=d()(It()),Pt=d()(wt()),$t=d()(kt()),qt=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(r.useState)(null),l=Object(m.a)(o,2),u=l[0],s=l[1],d=Object(g.d)(St,{fetchPolicy:"cache-and-network",variables:{filter:{sorter:{createdAt:"desc"}}},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),f=d.data,p=(d.loading,d.error,d.refetch),b=Object(g.c)(Nt,{onCompleted:function(e){p()}}),v=Object(m.a)(b,2),h=v[0],y=(v[1],Object(g.c)(Pt,{onCompleted:function(e){p()}})),E=Object(m.a)(y,2),j=E[0],k=(E[1],Object(g.c)($t,{onCompleted:function(e){p()}})),w=Object(m.a)(k,2),I=w[0],x=(w[1],[{title:"No.",dataIndex:"index",key:"index",width:75,render:function(e,t,n){return"".concat(n+1,".")}},{title:"\u8ba2\u8d2d\u65e5\u671f",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(ot.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"\u8ba2\u5355\u7f16\u53f7",dataIndex:"_id",key:"_id",render:function(e,t){return c.a.createElement("a",{style:{whiteSpace:"pre-wrap",textDecoration:"underline"},onClick:function(){!function(e){i(!0),s(e)}(t)}},t._id.toUpperCase())}},{title:"\u6536\u8d27\u4eba",dataIndex:"customer",key:"customer",sorter:function(e,t){return e.name-t.name},render:function(e,t){return e.name}},{title:"\u603b\u8ba1",dataIndex:"total",key:"total",sorter:function(e,t){return e.total-t.total}}]),C=(c.a.createElement("div",null,"\u7a7a\u7a7a\u5982\u4e5f"),{newOrders:[].concat(x,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return c.a.createElement(O.a,{size:"small",type:"".concat(e?"primary":"danger"),onClick:function(){h({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"",dataIndex:"action",key:"action",render:function(e,t){return c.a.createElement(ye.a,{title:"Sure to delete?",onConfirm:function(){I({variables:{_id:t._id}})}},c.a.createElement(O.a,{type:"danger",size:"small"},"\u53d6\u6d88"))}}]),paidOrders:[].concat(x,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return c.a.createElement(O.a,{type:"".concat(e?"primary":"danger"),size:"small",onClick:function(){h({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",width:200,render:function(e,t){return t.sentOut&&e?c.a.createElement("div",null,e):c.a.createElement(_t,{placeholder:"Enter tracking no.",enterButton:c.a.createElement(we.a,null),size:"small",onSearch:function(e){j({variables:{_id:t._id,trackingNum:e}})}})}}]),completedOrders:[].concat(x,[{title:"Last Updated",dataIndex:"updatedAt",key:"updatedAt",sorter:function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)},render:function(e,t){return Object(ot.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",render:function(e,t){return e}}])}),_=function(){var e=f?f.orders:[],t=[],n=[],a=[];return e.map((function(e){e.paid||e.sentOut?e.paid&&!e.sentOut?n.push(e):e.paid&&e.sentOut&&a.push(e):t.push(e)})),{newOrders:t,paidOrders:n,completedOrders:a}}();return c.a.createElement(ce,{title:"Orders"},c.a.createElement(ht.a,{defaultActiveKey:"1"},c.a.createElement(Ct,{tab:"New Orders",key:"1"},c.a.createElement(he.a,{rowKey:"_id",columns:C.newOrders,dataSource:_.newOrders,pagination:!1,size:"small",scroll:{x:100*C.newOrders.length},footer:null})),c.a.createElement(Ct,{tab:"Paid Orders",key:"2"},c.a.createElement(he.a,{rowKey:"_id",columns:C.paidOrders,dataSource:_.paidOrders,pagination:!1,size:"small",scroll:{x:100*C.paidOrders.length},footer:null})),c.a.createElement(Ct,{tab:"Completed Orders",key:"3"},c.a.createElement(he.a,{rowKey:"_id",columns:C.completedOrders,dataSource:_.completedOrders,pagination:!1,size:"small",scroll:{x:100*C.completedOrders.length},footer:null}))),c.a.createElement(jt,{order:u,visible:a,closeModal:function(){i(!1)}}))},At=function(e){var t=e.component,n=Object(a.a)(e,["component"]),r=Object(p.l)(),i=T(),o=!1;return i&&i.success&&(o=!0),c.a.createElement(p.d,Object.assign({},n,{render:function(e){return o?c.a.createElement(t,e):c.a.createElement(p.c,{to:{pathname:"/login",state:{from:r}}})}}))},Dt=function(e){var t=e.component,n=e.restricted,r=Object(a.a)(e,["component","restricted"]),i=T(),o=U(),l=!1;return i&&i.success&&o&&(l=!0),c.a.createElement(p.d,Object.assign({},r,{render:function(e){return l&&n?c.a.createElement(p.c,{to:"/"}):c.a.createElement(t,e)}}))},Ft=function(){return c.a.createElement("div",null,"404: Page Not Found")};function Vt(){var e=Object(f.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return Vt=function(){return e},e}function Ut(){var e=Object(f.a)(["\n  query loggedInUser{\n    loggedInUser{\n        success\n        message\n        data\n    }\n  }\n"]);return Ut=function(){return e},e}var Mt=b,Tt=R,Bt=d()(Ut()),zt=d()(Vt()),Lt=function(e){var t=Object(r.useState)(!1),n=Object(m.a)(t,2),a=n[0],i=n[1],o=Object(g.d)(Bt,{fetchPolicy:"cache-and-network",onCompleted:function(e){e&&e.loggedInUser&&e.loggedInUser.success&&b({variables:{configId:e.loggedInUser.data.configId}})},onError:function(e){console.log(e),i(!1)}}),l=o.data,u=o.error,s=o.loading,d=(o.refetch,Object(g.b)(zt,{fetchPolicy:"cache-and-network",onCompleted:function(e){e&&e.userConfig&&e.userConfig.success&&(V(e.userConfig.data),M(l.loggedInUser),i(!0))}})),f=Object(m.a)(d,2),b=f[0],v=f[1],h=(v.data,v.error,v.loading),O=T(),y=U();Object(r.useEffect)((function(){O&&O.success&&y?i(!0):i(!1)}),[O,y]);var E=function(){return c.a.createElement("div",null,"Main")};return s||h?c.a.createElement(G,null):(u&&console.log("error: ".concat(u)),c.a.createElement(Mt,{header:a?c.a.createElement(Tt,{setLoggedIn:i}):null,footer:a?"2020":null},c.a.createElement(p.g,null,c.a.createElement(Dt,{restricted:!0,exact:!0,path:"/login",component:ae}),c.a.createElement(At,{exact:!0,path:"/",component:vt}),c.a.createElement(At,{exact:!0,path:"/main",component:E}),c.a.createElement(At,{exact:!0,path:"/orders",component:qt}),c.a.createElement(At,{exact:!0,path:"/configuration",component:E}),c.a.createElement(p.d,{component:Ft}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Rt=Fe(),Jt=t.default=Rt,Kt=Rt.client;Rt.cache,Object(a.a)(Rt,["client","cache"]);o.a.render(c.a.createElement(u.BrowserRouter,null,c.a.createElement(l.a,{client:Kt},c.a.createElement(Lt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[285,1,2]]]);
//# sourceMappingURL=main.52c6bd04.chunk.js.map