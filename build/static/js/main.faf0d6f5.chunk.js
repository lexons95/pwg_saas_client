(this.webpackJsonppwg_saas_client=this.webpackJsonppwg_saas_client||[]).push([[0],{285:function(e,t,n){e.exports=n(547)},290:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},291:function(e,t,n){},354:function(e,t,n){e.exports=n.p+"static/media/noImageFound.3a5a71c0.png"},547:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n(19),c=n(0),i=n.n(c),o=n(12),l=n.n(o),u=n(37),s=n(18),d=n.n(s),m=n(10),f=n(101),p=n(85),g=(n(290),n(291),function(e){return i.a.createElement("div",{id:"layout_01"},i.a.createElement("div",{className:"wrapper layout_01-wrapper"},i.a.createElement("div",{className:"header"},e.header?e.header:null),i.a.createElement("div",{className:"content"},e.children?e.children:null,i.a.createElement("div",{className:"footer"},e.footer?e.footer:null))))}),b=n(58),v=(n(109),n(47)),h=(n(56),n(16)),y=n(24),O=n(553),E=n(554),j=(n(120),n(62)),k=n(552),I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={title:e&&"string"==typeof e?e.toUpperCase():"...",icon:i.a.createElement(k.a,null),content:t,okType:"danger",onCancel:function(){j.a.destroyAll()}};null!=n&&(a.onOk=n),j.a[e](a)},w=n(38);function x(){var e=Object(r.a)(["\n  query config {\n    config {\n      _id\n      configId\n      defaultImage\n      defaultImage_system\n      imageSrc\n      paymentQRImage\n      server\n      profile {\n        name\n      }\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=Object(r.a)(["\n  query config {\n    config @client {\n      _id\n      configId\n      defaultImage\n      defaultImage_system\n      imageSrc\n      paymentQRImage\n      server\n      profile {\n        name\n      }\n    }\n  }\n"]);return C=function(){return e},e}function _(){var e=Object(r.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return _=function(){return e},e}function S(){var e=Object(r.a)(["\n  query user {\n    user {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return S=function(){return e},e}function N(){var e=Object(r.a)(["\n  query user {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return N=function(){return e},e}var $=n(354),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;if(e){t=Object(w.a)({},e);var n=$;t.defaultImage&&""!=t.defaultImage&&(n=t.imageSrc+t.defaultImage),t.defaultImage=n}return t},q=d()(N()),A=d()(S()),D=function(){var e=Object(y.d)(q,{fetchPolicy:"cache-only"}),t=e.data,n=e.error,a=(e.loading,null);return n&&console.log("useUserCache",n),t&&t.user&&(a=t.user),a},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Lt.client;null!=t&&(n=t),n.writeQuery({query:A,data:{user:e}})},V=(d()(_()),d()(C())),M=(d()(x()),function(){var e=Object(y.d)(V,{fetchPolicy:"cache-only"}),t=e.data,n=e.error,a=(e.loading,null);return n&&console.log("useConfigCache",n),t&&t.config&&(a=t.config),a}),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Lt.client;null!=t&&(n=t),n.writeQuery({query:V,data:{config:P(e)}})};function U(){var e=Object(r.a)(["\n    mutation logout {\n      logout {\n        success\n        message\n        data\n      }\n    }\n"]);return U=function(){return e},e}var z=d()(U()),B=function(e){var t,n=Object(y.a)(),a=Object(p.g)(),r=M(),o=Object(y.c)(z,{onCompleted:function(e){if(e&&e.logout&&e.logout.success){n.resetStore().then((function(){T(null),F(null)}))}}}),l=Object(m.a)(o,1)[0],u=Object(c.useState)(!1),s=Object(m.a)(u,2),d=s[0],f=s[1],g=[{name:"Inventory",icon:null,route:"/"},{name:"Orders",icon:null,route:"/orders"}];return i.a.createElement("header",{id:"header_01","data-header-collapsed":d},i.a.createElement("div",{className:"header_01-header"},i.a.createElement("div",{className:"header_01-item collapse-btn"},i.a.createElement(h.a,(t={shape:"circle",type:"link"},Object(b.a)(t,"shape","circle"),Object(b.a)(t,"icon",i.a.createElement(O.a,{rotate:d?180:0})),Object(b.a)(t,"onClick",d?function(){f(!1)}:function(){f(!0)}),t)))),i.a.createElement("div",{className:"header_01-content"},function(){var e=[];return g.map((function(t,n){var r={shape:"circle"};d?r.shape="circle":r.type="link",e.push(i.a.createElement("div",{className:"header_01-item ".concat(a.location.pathname==t.route?"header_01-activeLink":""),key:n,onClick:function(){a.push(t.route)}},d?i.a.createElement(v.a,{title:t.name,placement:"right"},i.a.createElement(h.a,r,t.name[0].toUpperCase())):i.a.createElement("span",{className:a.location.pathname==t.route?"header_01-activeLink":""},t.name)))})),e}()),i.a.createElement("div",{className:"header_01-footer"},r&&!d?i.a.createElement("div",{className:"header_01-item",style:{cursor:"default"}},r.profile.name):null,i.a.createElement("div",{className:"header_01-item",onClick:function(){I("confirm","Confirm Logout?",(function(){l()}))}},d?i.a.createElement(v.a,{title:"Logout",placement:"right"},i.a.createElement(h.a,{shape:"circle",icon:i.a.createElement(E.a,null)})):i.a.createElement("span",null,"Logout"))))},L=(n(359),n(279),n(361),n(283),n(555),n(556),n(210),n(93)),J=(n(180),n(29)),R=(n(127),n(40)),W=n(557),K=function(e){var t=Object(c.useState)(!0),n=Object(m.a)(t,2),a=n[0];n[1];return a?i.a.createElement("div",{className:"loading"},i.a.createElement(W.a,null)):null},Q=(n(367),n(278));function G(){var e=Object(r.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return G=function(){return e},e}function H(){var e=Object(r.a)(["\n    mutation login($user: JSONObject) {\n      login(user: $user) {\n        success\n        message\n        data\n      }\n    }\n"]);return H=function(){return e},e}var X=d()(H()),Y=d()(G()),Z={labelCol:{span:8},wrapperCol:{span:16}},ee={wrapperCol:{offset:8,span:16}},te=function(e){Object(p.g)();var t=Object(y.c)(X,{onCompleted:function(e){if(e&&e.login&&e.login.success){u({variables:{configId:e.login.data.configId}})}else!function(e){var t=e.type,n=void 0===t?"info":t,a=e.message;e.description;Q.a[n]({message:a})}({type:"error",message:"Failed to login"})}}),n=Object(m.a)(t,2),a=n[0],r=n[1],c=r.data,o=r.loading,l=Object(y.b)(Y,{fetchPolicy:"cache-and-network",onCompleted:function(e){e&&e.userConfig&&e.userConfig.success&&(T(e.userConfig.data),F(c.login))}}),u=Object(m.a)(l,1)[0];return i.a.createElement("div",{id:"page_login"},i.a.createElement(J.a,Object.assign({},Z,{name:"basic",initialValues:{remember:!0},onFinish:function(e){a({variables:{user:e}})},onFinishFailed:function(e){console.log("Failed:",e)}}),i.a.createElement(J.a.Item,{label:"\u8d26\u53f7",name:"username",rules:[{required:!0,message:"Please input your username!"}]},i.a.createElement(R.a,null)),i.a.createElement(J.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"Please input your password!"}]},i.a.createElement(R.a.Password,null)),i.a.createElement(J.a.Item,Object.assign({},ee,{name:"remember",valuePropName:"checked"}),i.a.createElement(L.a,null,"Remember me")),i.a.createElement(J.a.Item,ee,i.a.createElement(h.a,{type:"primary",htmlType:"submit"},"\u767b\u5165"))),o?i.a.createElement(K,null):null)},ne=(n(133),n(87),n(549),n(277)),ae=function(e){e.children;var t=Object(a.a)(e,["children"]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"page_01"},i.a.createElement(ne.a,t,e.children)))},re=n(558),ce=(n(550),n(276)),ie=(n(230),n(154)),oe=(n(231),n(106)),le=n(107),ue=n(27),se=n.n(ue),de=n(45),me=(n(232),n(84)),fe=(n(472),n(193)),pe=n(562),ge=n(563),be=(n(187),n(83)),ve=n(282),he=(n(243),n(119)),ye=(n(479),n(194)),Oe=n(559),Ee=n(560),je=n(561),ke=n(260),Ie=n.n(ke),we=R.a.Search,xe=i.a.createContext(),Ce=function(e){e.index;var t=Object(a.a)(e,["index"]),n=J.a.useForm(),r=Object(m.a)(n,1)[0];return i.a.createElement(J.a,{form:r,component:!1},i.a.createElement(xe.Provider,{value:r},i.a.createElement("tr",t)))},_e=function(e){var t=e.title,n=e.editable,r=e.children,o=e.dataIndex,l=e.record,u=e.handleSave,s=e.isVariant,d=void 0!==s&&s,f=Object(a.a)(e,["title","editable","children","dataIndex","record","handleSave","isVariant"]),p=Object(c.useState)(!1),g=Object(m.a)(p,2),v=g[0],h=g[1],y=Object(c.useRef)(),O=Object(c.useContext)(xe);Object(c.useEffect)((function(){v&&y.current.focus()}),[v]);var E=function(){h(!v),O.setFieldsValue(Object(b.a)({},o,l[o]))},j=function(){var e=Object(de.a)(se.a.mark((function e(t){var n;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.validateFields();case 3:n=e.sent,E(),u(Object(w.a)({},l,{},n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),k=r;return d?k=v?i.a.createElement(J.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o},i.a.createElement(R.a,{ref:y,onPressEnter:j,onBlur:j})):i.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E},r):n&&(k=v?i.a.createElement(J.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o,rules:[{required:!0,message:"".concat(t," is required.")}]},"price"==o?i.a.createElement(ye.a,{ref:y,min:0,step:1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onPressEnter:j,onBlur:j}):"stock"==o?i.a.createElement(ye.a,{ref:y,min:0,step:1,onPressEnter:j,onBlur:j}):i.a.createElement(R.a,{ref:y,onPressEnter:j,onBlur:j})):i.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:E},r)),i.a.createElement("td",f,k)},Se=function(e){var t=e.productId,n=e.inventoryData,r=e.setInventoryData,o=e.productVariants,l=e.setProductVariants,u=Object(c.useState)([]),s=Object(m.a)(u,2),d=(s[0],s[1],Object(c.useState)(!1)),f=Object(m.a)(d,2),p=f[0],g=f[1],y=J.a.useForm(),O=Object(m.a)(y,1)[0],E=function(e){o[e];var t=Object(a.a)(o,[e].map(ve.a));l(t);var c=n.map((function(t){return delete t[e],t}));r(c)},k=function(e,t,a){a.preventDefault();var c=n.map((function(e){return e.key})).indexOf(e.key);r(Ie()(n,Object(b.a)({},c,{published:{$set:t}})))},I=function(e){r(n.filter((function(t){return t.key!==e})))},x=function(e){var t=Object(le.a)(n),a=t.findIndex((function(t){return e.key===t.key})),c=t[a];t.splice(a,1,Object(w.a)({},c,{},e)),r(t)},C={body:{row:Ce,cell:_e}},_=function(){var e=[],t=Object.keys(o),a=[{title:"Price",dataIndex:"price",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.price-t.price}},{title:"Stock",dataIndex:"stock",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.stock-t.stock}},{title:"Published",dataIndex:"published",width:100,fixed:"right",align:"center",render:function(e,t){return i.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},i.a.createElement(ie.a,{checkedChildren:"Active",unCheckedChildren:"Inactive",checked:t.published,onChange:function(e,n){k(t,e,n)}}))}},{title:i.a.createElement(v.a,{title:"New Variant"},i.a.createElement(h.a,{onClick:function(){g(!0)},block:!0,type:"link",icon:i.a.createElement(re.a,null),disabled:!(t.length<4)})),dataIndex:"operation",width:50,align:"center",fixed:"right",render:function(e,t){return n.length>=1?i.a.createElement(he.a,{title:"Sure to delete?",onConfirm:function(){return I(t.key)}},i.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},i.a.createElement(Oe.a,null))):null}}];return t&&t.length>0&&t.map((function(t){e.push({title:o[t],dataIndex:t,editable:!0,isVariant:!0,width:150,ellipsis:!0,sorter:function(e,n){return e[t]>n[t]?-1:n[t]>e[t]?1:0},filterIcon:i.a.createElement(Ee.a,null),filterDropdown:function(e){return i.a.createElement("div",{style:{padding:"10px",display:"flex"}},e.visible?i.a.createElement(i.a.Fragment,null,i.a.createElement(we,{enterButton:i.a.createElement(je.a,null),defaultValue:o[t],onSearch:function(n){return function(n){e.confirm(),l(Object(w.a)({},o,Object(b.a)({},t,n)))}(n)}}),i.a.createElement(he.a,{title:"Sure to delete?",onConfirm:function(){e.confirm(),E(t)}},i.a.createElement(h.a,{type:"danger",icon:i.a.createElement(Oe.a,null),style:{marginLeft:"5px"}}))):null)},onFilter:function(){console.log("on filter ok")}})})),e.concat(a)}().map((function(e){return e.editable?Object(w.a)({},e,{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,isVariant:e.isVariant,handleSave:x}}}):e}));return i.a.createElement("div",{className:"inventoryTable-main"},i.a.createElement(h.a,{onClick:function(){var e={key:(new Date).getTime(),_id:null,price:0,stock:0,published:!1,productId:t};if(n.length>0){var c=n[n.length-1],i=(c.key,c._id,c.published,Object(a.a)(c,["key","_id","published"]));e=Object(w.a)({},e,{},i)}r([].concat(Object(le.a)(n),[e]))},type:"primary",style:{marginRight:16,marginBottom:16},disabled:!(n.length<20),icon:i.a.createElement(re.a,null)},"Item"),i.a.createElement(be.a,{components:C,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:n,columns:_,size:"small",pagination:!1,scroll:{x:150*(_.length-4)}}),i.a.createElement(J.a,{form:O},i.a.createElement(j.a,{title:"New Variant",width:300,bodyStyle:{paddingBottom:0},visible:p,onOk:function(){var e=O.getFieldValue();if(e&&e.variantName){var t="v"+(new Date).getTime();l(Object(w.a)({},o,Object(b.a)({},t,e.variantName))),O.resetFields()}g(!1)},onCancel:function(){g(!1)}},i.a.createElement(J.a.Item,{name:"variantName",rules:[{required:!0,message:"Name is required."}]},i.a.createElement(R.a,{maxLength:8})))))},Ne=n(162),$e=n(86),Pe=n(280),qe=n(281);function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Pe.a({addTypename:!1}),n=new $e.c({cache:t,link:new qe.a({uri:e||"http://13.124.162.243/graphql",credentials:"include"})});return{client:n,cache:t,query:function(){var e=Object(de.a)(se.a.mark((function e(t){var a,r=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.query({variables:a,query:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mutation:function(){var e=Object(de.a)(se.a.mark((function e(t){var a,r=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.mutate({variables:a,mutation:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}function De(){var e=Object(r.a)(["\n  mutation qiniuBatchDelete($images: [String!]) {\n    qiniuBatchDelete(images: $images) {\n      success\n      message\n      data\n    }\n  }\n"]);return De=function(){return e},e}function Fe(){var e=Object(r.a)(["\n  {\n    qiniuToken {\n      success\n      message\n      data\n    }\n  }\n"]);return Fe=function(){return e},e}function Ve(){var e=Object(r.a)(["\n  {\n    qiniu @client {\n      success\n      message\n      data\n    }\n  }\n"]);return Ve=function(){return e},e}d()(Ve());var Me=d()(Fe()),Te=d()(De()),Ue=function(){var e=Object(de.a)(se.a.mark((function e(){var t,n,a,r=arguments;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(r.length>0&&void 0!==r[0])||r[0],n=Ae(),a="",!t){e.next=7;break}return e.next=6,n.query(Me).then((function(e){return e})).catch((function(e){}));case 6:a=e.sent;case 7:return e.abrupt("return",{upload:function(){var e=Object(de.a)(se.a.mark((function e(t){var n,r,c,i;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.originFileObj,r={useCdnDomain:!0,region:Ne.region.z0},c={fname:"",params:{},mimeType:["image/png","image/jpeg","image/gif"]},i=t.name,e.abrupt("return",new Promise((function(e,t){if(a){var o=a.data.qiniuToken;if(o.success){var l=o.data;Ne.upload(n,i,l,c,r).subscribe({next:function(e){console.log("next(res)",e)},error:function(e){console.log("error(err)",e),t(e)},complete:function(t){console.log("complete(res)",t),e(t)}})}}else t("Error getting token")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),batchDelete:function(){var e=Object(de.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){n.mutation(Te,{images:t}).then((function(t){return e(t)})).catch((function(e){console.log(e),a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),imageMogr2:function(e,t,n){return Ne.imageMogr2(e,t,n)}});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ze(){var e=Object(r.a)(["\n  mutation updateProduct($product: JSONObject!) {\n    updateProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return ze=function(){return e},e}function Be(){var e=Object(r.a)(["\n  mutation deleteProduct($_id: String!) {\n    deleteProduct(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return Be=function(){return e},e}function Le(){var e=Object(r.a)(["\n  mutation createProduct($product: JSONObject!) {\n    createProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return Le=function(){return e},e}function Je(){var e=Object(r.a)(["\n  mutation bulkUpdateInventory($inventory: [JSONObject!]) {\n    bulkUpdateInventory(inventory: $inventory) {\n      success\n      message\n      data\n    }\n  }\n"]);return Je=function(){return e},e}function Re(){var e=Object(r.a)(["\n  query inventory($filter: JSONObject, $configId: String) {\n    inventory(filter: $filter, configId: $configId) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return Re=function(){return e},e}var We=fe.a.Panel,Ke=me.a.Option,Qe=d()(Re()),Ge=d()(Je()),He=d()(Le()),Xe=d()(Be()),Ye=d()(ze()),Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],a=[],r=[],c=[];return t.map((function(e,t){var r=e.name;if(e.originFileObj){var i=r.split(".");r="saas_".concat(t,"_").concat((new Date).getTime(),"_").concat(i[i.length-2],".").concat(i[i.length-1]),e.name=r,n.push(e)}else a.push(e);c.push({name:r,fav:!!e.fav&&e.fav})})),e.map((function(e){a.map((function(e){return e.name})).indexOf(e.name)<0&&r.push(e)})),{upload:n,delete:r,allImages:c,uploaded:e}};function et(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var tt=function(e){var t=e.product,n=void 0===t?null:t,r=e.categories,o=e.refetch,l=Object(a.a)(e,["product","categories","refetch"]),u=M(),s=J.a.useForm(),d=Object(m.a)(s,1)[0],f=Object(c.useState)([]),p=Object(m.a)(f,2),g=p[0],b=p[1],v=Object(c.useState)(!1),O=Object(m.a)(v,2),E=O[0],k=O[1],x=Object(c.useState)(null),C=Object(m.a)(x,2),_=C[0],S=C[1],N=Object(c.useState)([]),$=Object(m.a)(N,2),P=$[0],q=$[1],A=Object(c.useState)(r),D=Object(m.a)(A,2),F=D[0],V=D[1],T=Object(c.useState)(""),U=Object(m.a)(T,2),z=U[0],B=U[1],L=Object(c.useState)({sku:"SKU"}),W=Object(m.a)(L,2),K=W[0],Q=W[1];Object(c.useEffect)((function(){if(n&&l.modalVisible){var e=Object.assign({},n);if(n.category&&n.category.length>0){var t=n.category.map((function(e){return{key:e._id,label:e.name}}));e.category=t}d.setFieldsValue(e),n.variants&&Q(n.variants),ee({variables:{filter:{filter:{productId:n._id}},configId:u.configId}}),n.images&&n.images.length>0&&b(function(e,t){var n=t.imageSrc;return e.map((function(e){return e.uid=e.name,e.url=n+e.name,e.thumbUrl=n+e.name,e.fav,e}))}(n.images,u))}else d.resetFields();l.setModalFooter(Ce())}),[n,l.modalVisible]);var G=i.a.createElement("div",null,i.a.createElement(re.a,null),i.a.createElement("div",{className:"ant-upload-text"},"Upload")),H=function(){var e=[].concat(g);e.map((function(e){return e.name==_.name?e.fav=!0:e.fav=!1,e})),b(e)},X=function(){var e=Object(de.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,et(t.originFileObj);case 3:t.preview=e.sent;case 4:k(!0),S(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=Object(y.b)(Qe,{fetchPolicy:"cache-and-network",onCompleted:function(e){if(e&&e.inventory){var t=[];e.inventory.map((function(e,n){var r=e.variants,c=Object(a.a)(e,["variants"]),i=Object(w.a)({},c,{},r,{key:c._id});t.push(i)})),q(t)}}}),Z=Object(m.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(y.c)(Ge,{onCompleted:function(e){}}),ae=Object(m.a)(ne,1)[0],ue=Object(y.c)(He,{onCompleted:function(e){l.onCancel(),o()}}),be=Object(m.a)(ue,2),ve=be[0],he=(be[1],Object(y.c)(Xe,{onCompleted:function(e){l.onCancel(),o()}})),ye=Object(m.a)(he,1)[0],Oe=Object(y.c)(Ye,{onCompleted:function(e){l.onCancel(),o()}}),Ee=Object(m.a)(Oe,2),je=Ee[0],ke=(Ee[1],function(){var e=Object(de.a)(se.a.mark((function e(t){var r,c,i,o,l,u;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(w.a)({},t,{images:[],variants:K}),t._id||delete r._id,t.category?(c=F.find((function(e){return e._id==t.category.key})))&&(r.category=[c]):r.category=[],i=Ze(n&&n.images?n.images:[],g),r.images=i.allImages,e.next=7,Ue();case 7:if(o=e.sent,i.upload.length>0&&i.upload.map(function(){var e=Object(de.a)(se.a.mark((function e(t){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.upload(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!(i.delete.length>0)){e.next=12;break}return e.next=12,o.batchDelete(i.delete.map((function(e){return e.name})));case 12:n?(je({variables:{product:Object(w.a)({},r,{_id:n._id})}}),l=(l=Object(le.a)(P)).map((function(e){e.key;var t=Object(a.a)(e,["key"]),n={};return Object.keys(K).map((function(e){t.hasOwnProperty(e)&&(n[e]=t[e],delete t[e])})),t.variants=n,t})),u=[],te.data&&te.data.inventory&&te.data.inventory.map((function(e){l.map((function(e){return e._id})).indexOf(e._id)<0&&u.push(Object(w.a)({},e,{deleted:!0}))})),ae({variables:{inventory:l.concat(u)}})):ve({variables:{product:r}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=function(){I("confirm","Confirm delete?",Object(de.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.images&&n.images.length>0)){e.next=6;break}return e.next=3,Ue();case 3:return t=e.sent,e.next=6,t.batchDelete(n.images.map((function(e){return e.name})));case 6:ye({variables:{_id:n._id}});case 7:case"end":return e.stop()}}),e)}))))},we=function(e){B(e.target.value)},xe=function(){z&&""!=z&&(V([].concat(Object(le.a)(F),[{_id:"category_".concat(z,"_").concat((new Date).getTime()),name:z}])),B(""))},Ce=function(){var e=[i.a.createElement(h.a,{key:"cancel",onClick:l.onCancel},"Cancel"),i.a.createElement(h.a,{key:"submit",type:"primary",onClick:function(){d.submit()}},"Save")];return n&&e.unshift(i.a.createElement(h.a,{key:"delete",type:"danger",onClick:Ie},"Delete")),e};return i.a.createElement("div",{id:"productForm"},i.a.createElement(fe.a,{defaultActiveKey:["1","2"],expandIconPosition:"right"},i.a.createElement(We,{header:"Product Information",key:"1"},i.a.createElement(J.a,{name:"complex-form",form:d,onFinish:ke,labelCol:{span:5},wrapperCol:{span:16}},n?null:i.a.createElement(J.a.Item,{name:"_id",label:"ID"},i.a.createElement(R.a,null)),i.a.createElement(J.a.Item,{name:"name",label:"Name",rules:[{required:!0}]},i.a.createElement(R.a,null)),i.a.createElement(J.a.Item,{name:"description",label:"Description"},i.a.createElement(R.a.TextArea,{rows:4})),i.a.createElement(J.a.Item,{name:"category",label:"Category"},i.a.createElement(me.a,{style:{width:240},placeholder:"Select a category",labelInValue:!0,allowClear:!0,dropdownRender:function(e){return i.a.createElement("div",null,e,i.a.createElement(oe.a,{style:{margin:"4px 0"}}),i.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},i.a.createElement(R.a,{style:{flex:"auto"},value:z,onChange:we,required:!0}),i.a.createElement(h.a,{type:"link",icon:i.a.createElement(re.a,null),onClick:xe,disabled:""==z.trim()},"New")))}},F.map((function(e,t){return i.a.createElement(Ke,{key:t,value:e._id},e.name)})))),i.a.createElement(J.a.Item,{name:"published",label:"Published",valuePropName:"checked"},i.a.createElement(ie.a,{checkedChildren:"Active",unCheckedChildren:"Inactive"})),i.a.createElement(J.a.Item,{name:"images",label:"Images"},i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{accept:"image/*",beforeUpload:function(e){return!1},listType:"picture-card",multiple:!0,fileList:g,onPreview:X,onChange:function(e){var t=e.fileList,n=(Object(a.a)(e,["fileList"]),t.map((function(e){return e.fav,e})));(t.length>4&&(n=t.slice(0,3)),n.length>0)&&(n.find((function(e){return e.fav}))||(n[0].fav=!0));b(n)},className:"productForm-upload"},g.length<4?G:null),i.a.createElement(j.a,{visible:E,footer:function(){var e=_&&_.fav;return i.a.createElement(h.a,{type:e?"primary":"default",icon:e?i.a.createElement(pe.a,{style:{color:"gold"}}):i.a.createElement(ge.a,null),onClick:H},"Favourite")}(),onCancel:function(){k(!1)}},i.a.createElement("img",{alt:"preview: ".concat(_?_.name:""),style:{width:"100%"},src:_?_.url||_.thumbUrl:""})))))),n?i.a.createElement(We,{header:"Pricing & Variants",key:"2"},i.a.createElement(Se,{productId:n._id,inventoryData:P,setInventoryData:q,productVariants:K,setProductVariants:Q})):null))},nt=function(e){var t=e.product,n=e.categories,a=void 0===n?[]:n,r=e.modalVisible,o=e.refetch,l=e.closeModal,u=Object(c.useState)([]),s=Object(m.a)(u,2),d=s[0],f=s[1],p={};return d&&(p.footer=d),i.a.createElement(j.a,Object.assign({title:t?t.name:"New Product",width:"95%",visible:r,onCancel:l,destroyOnClose:!0,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},p),i.a.createElement(tt,{product:t,categories:a,refetch:o,modalVisible:r,onCancel:l,setModalFooter:f}))},at=(n(242),n(108));function rt(){var e=Object(r.a)(["\n  query products($filter: JSONObject, $configId: String) {\n    products(filter: $filter, configId: $configId) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return rt=function(){return e},e}d()(rt());var ct=n(551);function it(){var e=Object(r.a)(["\n  mutation updateInventoryPublish($ids: [String!], $published: Boolean!) {\n    updateInventoryPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return it=function(){return e},e}function ot(){var e=Object(r.a)(["\n  mutation updateProductPublish($ids: [String!], $published: Boolean!) {\n    updateProductPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return ot=function(){return e},e}function lt(){var e=Object(r.a)(["\n  query inventory($filter: JSONObject, $configId: String) {\n    inventory(filter: $filter, configId: $configId) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return lt=function(){return e},e}function ut(){var e=Object(r.a)(["\n  query products($filter: JSONObject, $configId: String) {\n    products(filter: $filter, configId: $configId) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return ut=function(){return e},e}var st=d()(ut()),dt=d()(lt()),mt=d()(ot()),ft=d()(it()),pt=function(e){var t=[];return e.map((function(e){e.category&&e.category.length>0&&e.category.map((function(e){t.find((function(t){return t._id==e._id}))||t.push(e)}))})),t},gt=function(e){var t=Object(c.useState)(!1),n=Object(m.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(m.a)(o,2),u=l[0],s=l[1],d=Object(c.useState)([]),f=Object(m.a)(d,2),p=f[0],g=f[1],b=Object(c.useState)(!1),v=Object(m.a)(b,2),O=v[0],E=v[1],j=M(),k=Object(y.d)(st,{fetchPolicy:"cache-and-network",variables:{configId:j.configId},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),I=k.data,x=(k.loading,k.error),C=k.refetch,_=Object(y.d)(dt,{fetchPolicy:"cache-and-network",variables:{configId:j.configId},onError:function(e){console.log("inventoryData error",e)},onCompleted:function(e){}}),S=_.data,N=(_.loading,_.error),$=_.refetch,P=Object(y.c)(mt,{onCompleted:function(e){C()}}),q=Object(m.a)(P,1)[0],A=Object(y.c)(ft,{onCompleted:function(e){$()}}),D=Object(m.a)(A,1)[0];Object(c.useEffect)((function(){p.length>0?O||E(!0):O&&E(!1)}),[p.length]);var F=function(e){r(!0),s(e)},V=[{title:"No.",dataIndex:"index",width:75,render:function(e,t,n){return n+1+"."}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(ct.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Name",dataIndex:"name",render:function(e,t){var n=t.name?i.a.createElement(h.a,{type:"link",onClick:function(){F(t)}},t.name):null;if(!n){var a="";if(t.variants){var r=Object.keys(t.variants);r.map((function(e,n){a+="".concat(t.variants[e]," ").concat(n==r.length-1?"":"/ ")}))}else a="-";n=a}return n}},{title:"Price",dataIndex:"price",render:function(e,t){var n=t.price;return n||(n="-"),n}},{title:"Stock",dataIndex:"stock",sorter:function(e,t){return e.stock&&t.stock?e.stock-t.stock:0},render:function(e,t){var n=t.stock;if(!n)if(t.children&&t.children.length>0){var a=0;t.children.map((function(e){a+=e.stock})),n=a}else n="-";return n}},{title:"Published",dataIndex:"published",render:function(e,t){return t.published?i.a.createElement(at.a,{color:"green"},"Active"):i.a.createElement(at.a,{color:"red"},"Inactive")}}],T={onChange:function(e,t){g(t)},onSelect:function(e,t,n){},onSelectAll:function(e,t,n){}};p.length;return i.a.createElement(ae,{title:"Inventory",extra:[i.a.createElement(h.a,{key:"create",type:"primary",icon:i.a.createElement(re.a,null),onClick:function(){F(null)}})]},i.a.createElement(be.a,{columns:V,rowSelection:T,dataSource:function(){var e=[];if(I&&S&&!x&&!N){var t=S.inventory.map((function(e){return Object(w.a)({},e,{key:e._id})}));I.products.map((function(n,a){var r=t.filter((function(e){return e.productId==n._id}));n.key=n._id,r.length>0&&(n.children=r),e.push(n)}))}return e}(),pagination:!1,scroll:{x:150*V.length},size:"small"}),i.a.createElement("div",{className:"inventory-selectionPanel ".concat(O?"open":"close")},function(){var e=[],t=[];p.map((function(n){n.productId&&""!=n.productId?e.push(n._id):t.push(n._id)}));return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(h.a,{type:"primary",size:"small",onClick:function(){e.length>0&&D({variables:{ids:e,published:!0}}),t.length>0&&q({variables:{ids:t,published:!0}})},style:{marginRight:"5px"},disabled:!O},"Publish"),i.a.createElement(h.a,{size:"small",onClick:function(){e.length>0&&D({variables:{ids:e,published:!1}}),t.length>0&&q({variables:{ids:t,published:!1}})},disabled:!O},"Unpublish"))}()),i.a.createElement(nt,{product:u,categories:I&&I.products?pt(I.products):[],refetch:function(){C(),$()},modalVisible:a,closeModal:function(){r(!1)}}))},bt=(n(539),n(192)),vt=(n(541),n(41)),ht=(n(543),n(163)),yt=(n(228),n(152)),Ot=function(e){var t=e.order,n=e.closeModal,r=e.visible,c=(Object(a.a)(e,["order","closeModal","visible"]),M());return i.a.createElement(j.a,{title:"Order",width:"95%",visible:r,onCancel:n,footer:null,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},t?i.a.createElement(i.a.Fragment,null,i.a.createElement(oe.a,{orientation:"left"},"\u8ba2\u5355"),i.a.createElement(vt.a,{size:"small",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:1,xs:1}},i.a.createElement(vt.a.Item,{label:"\u7f16\u53f7"},t._id),i.a.createElement(vt.a.Item,{label:"\u8ba2\u8d2d\u65e5\u671f"},Object(ct.a)(new Date(t.createdAt),"MM/dd/yyyy hh:mm:ss aa")),i.a.createElement(vt.a.Item,{label:"\u4ed8\u6b3e\u72b6\u6001"},t.paid?i.a.createElement("span",{style:{color:"green"}},"\u5df2\u4ed8\u6b3e"):i.a.createElement("span",{style:{color:"red"}},"\u5f85\u4ed8\u6b3e")),i.a.createElement(vt.a.Item,{label:"\u8d27\u7269\u72b6\u6001"},t.sentOut?i.a.createElement("span",{style:{color:"green"}},"\u5df2\u51fa\u8d27 ",i.a.createElement("small",null," (\u8fd0\u5355\u53f7: ",t.trackingNum,")")):i.a.createElement("span",{style:{color:"red"}},"\u672a\u51fa\u8d27"))),i.a.createElement(oe.a,{orientation:"left"},"\u6536\u4ef6\u4eba"),i.a.createElement(vt.a,{id:"buyerInfoTable",size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},i.a.createElement(vt.a.Item,{label:"\u540d\u5b57"},t.customer.name),i.a.createElement(vt.a.Item,{label:"\u7535\u8bdd\u53f7\u7801"},t.customer.contact),i.a.createElement(vt.a.Item,{label:"\u6536\u4ef6\u5730\u5740"},t.customer.address),i.a.createElement(vt.a.Item,{label:"\u90ae\u7f16"},t.customer.postcode),i.a.createElement(vt.a.Item,{label:"\u7701\u4efd"},t.customer.province)),i.a.createElement(oe.a,{orientation:"left"},"\u8d2d\u4e70\u5217\u8868"),i.a.createElement(ht.a,{itemLayout:"horizontal",dataSource:t.items,renderItem:function(e){var t=e.product.name,n="",a=Object.keys(e.variant);a.map((function(t,r){n+="".concat(e.variant[t].name,": ").concat(e.variant[t].value).concat(r==a.length-1?"":", ")}));var r="";return c&&e.product.image&&(r=c.imageSrc+e.product.image),i.a.createElement(ht.a.Item,{actions:["qty: "+e.qty,"price: "+e.price]},i.a.createElement(ht.a.Item.Meta,{avatar:i.a.createElement(yt.a,{shape:"square",src:r}),title:t,description:n}))},footer:i.a.createElement("div",{className:"orderInfo-item-summary"},i.a.createElement(vt.a,{bordered:!0,size:"small",column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1},style:{maxWidth:"100%"}},i.a.createElement(vt.a.Item,{label:"\u90ae\u8d39"},t.deliveryFee?t.deliveryFee:0),i.a.createElement(vt.a.Item,{label:"\u603b\u8ba1"},t.total)))}),t.sentOut&&t.trackingNum?i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("iframe",{src:"https://m.kuaidi100.com/app/query/?coname=indexall&nu=".concat(t.trackingNum),style:{border:"none",maxWidth:"400px",height:"600px",textAlign:"center"}})):null):"Not found")};function Et(){var e=Object(r.a)(["\n  mutation cancelOrder($_id: String!) {\n    cancelOrder(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return Et=function(){return e},e}function jt(){var e=Object(r.a)(["\n  mutation updateOrderDelivery($_id: String!, $trackingNum: String) {\n    updateOrderDelivery(_id: $_id, trackingNum: $trackingNum) {\n      success\n      message\n      data\n    }\n  }\n"]);return jt=function(){return e},e}function kt(){var e=Object(r.a)(["\n  mutation updateOrderPayment($_id: String!, $paid: Boolean!) {\n    updateOrderPayment(_id: $_id, paid: $paid) {\n      success\n      message\n      data\n    }\n  }\n"]);return kt=function(){return e},e}function It(){var e=Object(r.a)(["\n  query orders($filter: JSONObject, $configId: String) {\n    orders(filter: $filter, configId: $configId) {\n      _id\n      createdAt\n      updatedAt\n      items\n      total\n      customer\n      paid\n      sentOut\n      trackingNum\n    }\n  }\n"]);return It=function(){return e},e}var wt=bt.a.TabPane,xt=R.a.Search,Ct=d()(It()),_t=d()(kt()),St=d()(jt()),Nt=d()(Et()),$t=function(e){var t=M(),n=Object(c.useState)(!1),a=Object(m.a)(n,2),r=a[0],o=a[1],l=Object(c.useState)(null),u=Object(m.a)(l,2),s=u[0],d=u[1],f=Object(y.d)(Ct,{fetchPolicy:"cache-and-network",variables:{filter:{sorter:{createdAt:"desc"}},configId:t.configId},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),p=f.data,g=(f.loading,f.error,f.refetch),b=Object(y.c)(_t,{onCompleted:function(e){g()}}),v=Object(m.a)(b,2),O=v[0],E=(v[1],Object(y.c)(St,{onCompleted:function(e){g()}})),j=Object(m.a)(E,2),k=j[0],I=(j[1],Object(y.c)(Nt,{onCompleted:function(e){g()}})),w=Object(m.a)(I,2),x=w[0],C=(w[1],[{title:"No.",dataIndex:"index",key:"index",width:75,render:function(e,t,n){return"".concat(n+1,".")}},{title:"\u8ba2\u8d2d\u65e5\u671f",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(ct.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"\u8ba2\u5355\u7f16\u53f7",dataIndex:"_id",key:"_id",render:function(e,t){return i.a.createElement("a",{style:{whiteSpace:"pre-wrap",textDecoration:"underline"},onClick:function(){!function(e){o(!0),d(e)}(t)}},t._id.toUpperCase())}},{title:"\u6536\u8d27\u4eba",dataIndex:"customer",key:"customer",sorter:function(e,t){return e.name-t.name},render:function(e,t){return e.name}},{title:"\u603b\u8ba1",dataIndex:"total",key:"total",sorter:function(e,t){return e.total-t.total}}]),_=(i.a.createElement("div",null,"\u7a7a\u7a7a\u5982\u4e5f"),{newOrders:[].concat(C,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return i.a.createElement(h.a,{size:"small",type:"".concat(e?"primary":"danger"),onClick:function(){O({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"",dataIndex:"action",key:"action",render:function(e,t){return i.a.createElement(he.a,{title:"Sure to delete?",onConfirm:function(){x({variables:{_id:t._id}})}},i.a.createElement(h.a,{type:"danger",size:"small"},"\u53d6\u6d88"))}}]),paidOrders:[].concat(C,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return i.a.createElement(h.a,{type:"".concat(e?"primary":"danger"),size:"small",onClick:function(){O({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",width:200,render:function(e,t){return t.sentOut&&e?i.a.createElement("div",null,e):i.a.createElement(xt,{placeholder:"Enter tracking no.",enterButton:i.a.createElement(je.a,null),size:"small",onSearch:function(e){k({variables:{_id:t._id,trackingNum:e}})}})}}]),completedOrders:[].concat(C,[{title:"Last Updated",dataIndex:"updatedAt",key:"updatedAt",sorter:function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)},render:function(e,t){return Object(ct.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",render:function(e,t){return e}}])}),S=function(){var e=p?p.orders:[],t=[],n=[],a=[];return e.map((function(e){e.paid||e.sentOut?e.paid&&!e.sentOut?n.push(e):e.paid&&e.sentOut&&a.push(e):t.push(e)})),{newOrders:t,paidOrders:n,completedOrders:a}}();return i.a.createElement(ae,{title:"Orders"},i.a.createElement(bt.a,{defaultActiveKey:"1"},i.a.createElement(wt,{tab:"New Orders",key:"1"},i.a.createElement(be.a,{rowKey:"_id",columns:_.newOrders,dataSource:S.newOrders,pagination:!1,size:"small",scroll:{x:100*_.newOrders.length},footer:null})),i.a.createElement(wt,{tab:"Paid Orders",key:"2"},i.a.createElement(be.a,{rowKey:"_id",columns:_.paidOrders,dataSource:S.paidOrders,pagination:!1,size:"small",scroll:{x:100*_.paidOrders.length},footer:null})),i.a.createElement(wt,{tab:"Completed Orders",key:"3"},i.a.createElement(be.a,{rowKey:"_id",columns:_.completedOrders,dataSource:S.completedOrders,pagination:!1,size:"small",scroll:{x:100*_.completedOrders.length},footer:null}))),i.a.createElement(Ot,{order:s,visible:r,closeModal:function(){o(!1)}}))},Pt=function(e){var t=e.component,n=Object(a.a)(e,["component"]),r=Object(p.h)(),c=D(),o=M(),l=!1;return c&&c.success&&o&&(l=!0),i.a.createElement(p.b,Object.assign({},n,{render:function(e){return l?i.a.createElement(t,e):i.a.createElement(p.a,{to:{pathname:"/login",state:{from:r}}})}}))},qt=function(e){var t=e.component,n=e.restricted,r=Object(a.a)(e,["component","restricted"]),c=Object(p.h)(),o=D(),l=M(),u=!1;return o&&o.success&&l&&(u=!0),i.a.createElement(p.b,Object.assign({},r,{render:function(e){return u&&n?i.a.createElement(p.a,{to:{pathname:"/",state:{from:c}}}):i.a.createElement(t,e)}}))},At=function(){return i.a.createElement("div",null,"404: Page Not Found")},Dt=g,Ft=B,Vt=function(e){var t=Object(c.useState)(!1),n=Object(m.a)(t,2),a=n[0],r=n[1],o=M();Object(c.useEffect)((function(){r(!!o)}),[o]);var l=function(){return i.a.createElement("div",null,"Main")};return i.a.createElement(f.a,null,i.a.createElement(Dt,{header:a?i.a.createElement(Ft,null):null,footer:a?"2020":null},i.a.createElement(p.d,null,i.a.createElement(Pt,{exact:!0,path:"/",component:gt}),i.a.createElement(Pt,{exact:!0,path:"/main",component:l}),i.a.createElement(Pt,{exact:!0,path:"/orders",component:$t}),i.a.createElement(Pt,{exact:!0,path:"/configuration",component:l}),i.a.createElement(qt,{restricted:!0,exact:!0,path:"/login",component:te}),i.a.createElement(p.b,{component:At}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mt(){var e=Object(r.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return Mt=function(){return e},e}function Tt(){var e=Object(r.a)(["\n  query loggedInUser{\n    loggedInUser{\n        success\n        message\n        data\n    }\n  }\n"]);return Tt=function(){return e},e}var Ut=d()(Tt()),zt=d()(Mt()),Bt=Ae(),Lt=t.default=Bt,Jt=Bt.client,Rt=(Bt.cache,Object(a.a)(Bt,["client","cache"]));Jt.writeData({data:{user:null,config:null}});!function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!=e&&null!=t&&(F(e,Jt),T(t,Jt)),l.a.render(i.a.createElement(u.a,{client:Jt},i.a.createElement(Vt,null)),document.getElementById("root"))};Rt.query(Ut).then((function(t){var n=t.data.loggedInUser;Rt.query(zt,{configId:n.data.configId}).then((function(t){var a=t.data.userConfig.data;e(n,a)})).catch((function(t){console.log("error2",t),e()}))})).catch((function(t){console.log("error",t),e()}))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[285,1,2]]]);
//# sourceMappingURL=main.faf0d6f5.chunk.js.map