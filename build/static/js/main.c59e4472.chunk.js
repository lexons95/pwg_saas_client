(this.webpackJsonppwg_saas_client=this.webpackJsonppwg_saas_client||[]).push([[0],{285:function(e,t,n){e.exports=n(547)},290:function(e,t,n){e.exports=n.p+"static/media/logo.25bf045c.svg"},291:function(e,t,n){},547:function(e,t,n){"use strict";n.r(t);var a=n(16),r=n(31),c=n(0),i=n.n(c),o=n(12),l=n.n(o),u=n(38),s=n(79),d=n(17),m=n.n(d),f=n(87),p=n(25),g=(n(290),n(291),function(e){return i.a.createElement("div",{id:"layout_01"},i.a.createElement("div",{className:"wrapper layout_01-wrapper"},i.a.createElement("div",{className:"header"},e.header?e.header:null),i.a.createElement("div",{className:"content"},e.children?e.children:null,i.a.createElement("div",{className:"footer"},e.footer?e.footer:null))))}),b=n(53),v=(n(119),n(57)),h=(n(55),n(18)),O=n(20),y=n.n(O),E=n(29),j=n(10),k=(n(295),n(552)),w=n(553),x=(n(120),n(61)),I=n(563),_=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a={title:e&&"string"==typeof e?e.toUpperCase():"...",icon:i.a.createElement(I.a,null),content:t,okType:"danger",onCancel:function(){x.a.destroyAll()}};null!=n&&(a.onOk=n),x.a[e](a)};function C(){var e=Object(a.a)(["\n  query loggedInUser{\n    loggedInUser{\n        success\n        message\n        data\n    }\n  }\n"]);return C=function(){return e},e}function S(){var e=Object(a.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return S=function(){return e},e}function N(){var e=Object(a.a)(["\n  query ROOT_QUERY {\n    user {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return N=function(){return e},e}function P(){var e=Object(a.a)(["\n  query ROOT_QUERY {\n    config {\n      _id\n      configId\n      defaultImage\n      defaultImage_system\n      imageSrc\n      paymentQRImage\n      server\n    }\n  }\n"]);return P=function(){return e},e}var $=m()(P()),D=m()(N()),q=m()(S()),A=(m()(C()),function(e){zt.client.writeQuery({query:D,data:{user:e}})}),F=function(){var e=Object(E.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n=zt.client.readQuery({query:D}),!(a=n.user)||!a.success){e.next=6;break}t=a,e.next=8;break;case 6:return e.next=8,zt.query($).then((function(e){var n=e.data;n.loggedInUser.success?(A(n.loggedInUser),t=n.loggedInUser):console.log("get logged in user  false")})).catch((function(e){console.log("GET_LOGGEDINUSER_QUERY error",e)}));case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;if(e){t=Object.assign({},e);var n=e.defaultImage?e.imageSrc+e.defaultImage:e.defaultImage_system;t.defaultImage=n}return t},T=function(){var e=Object(E.a)(y.a.mark((function e(){var t,n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,!zt){e.next=16;break}if(n=zt.client.readQuery({query:$}),!(a=n.config)){e.next=8;break}console.log("found config cache"),t=U(a),e.next=16;break;case 8:return console.log("not found config cache, run query"),e.next=11,F();case 11:if(!(r=e.sent)){e.next=16;break}return console.log("getConfig user",r),e.next=16,zt.query(q,{configId:r.data.configId}).then((function(e){var n=e.data;n.userConfig.success?(zt.client.writeQuery({query:$,data:{config:n.userConfig.data}}),t=U(n.userConfig.data)):console.log("get config success false")})).catch((function(e){console.log("GET_USERCONFIG_QUERY error",e)}));case 16:return console.log("result",t),e.abrupt("return",t);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function V(){var e=Object(a.a)(["\n  {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return V=function(){return e},e}function B(){var e=Object(a.a)(["\n    mutation logout {\n      logout {\n        success\n        message\n        data\n      }\n    }\n"]);return B=function(){return e},e}var R=m()(B()),M=(m()(V()),function(e){var t,n=Object(p.a)(),a=Object(f.k)(),r=Object(c.useState)(null),o=Object(j.a)(r,2),l=o[0],u=o[1],s=Object(p.c)(R,{onCompleted:function(e){if(e&&e.logout&&e.logout.success){console.log("logged out");n.writeData({data:{user:null,config:null}}),a.push("/login")}}}),d=Object(j.a)(s,1)[0];Object(c.useEffect)((function(){(function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,T();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var m=Object(c.useState)(!1),g=Object(j.a)(m,2),O=g[0],x=g[1],I=[{name:"Inventory",icon:null,route:"/"},{name:"Orders",icon:null,route:"/orders"}];return i.a.createElement("header",{id:"header_01","data-header-collapsed":O},i.a.createElement("div",{className:"header_01-header"},i.a.createElement("div",{className:"header_01-item collapse-btn"},i.a.createElement(h.a,(t={shape:"circle",type:"link"},Object(b.a)(t,"shape","circle"),Object(b.a)(t,"icon",i.a.createElement(k.a,{rotate:O?180:0})),Object(b.a)(t,"onClick",O?function(){x(!1)}:function(){x(!0)}),t)))),i.a.createElement("div",{className:"header_01-content"},function(){var e=[];return I.map((function(t,n){var r={shape:"circle"};O?r.shape="circle":r.type="link",e.push(i.a.createElement("div",{className:"header_01-item ".concat(a.location.pathname==t.route?"header_01-activeLink":""),key:n,onClick:function(){a.push(t.route)}},O?i.a.createElement(v.a,{title:t.name,placement:"right"},i.a.createElement(h.a,r,t.name[0].toUpperCase())):i.a.createElement("span",{className:a.location.pathname==t.route?"header_01-activeLink":""},t.name)))})),e}()),i.a.createElement("div",{className:"header_01-footer"},l&&!O?i.a.createElement("div",{className:"header_01-item",style:{cursor:"default"}},l.configId):null,i.a.createElement("div",{className:"header_01-item",onClick:function(){_("confirm","Confirm Logout?",(function(){d()}))}},O?i.a.createElement(v.a,{title:"Logout",placement:"right"},i.a.createElement(h.a,{shape:"circle",icon:i.a.createElement(w.a,null)})):i.a.createElement("span",null,"Logout"))))}),L=(n(360),n(281),n(362),n(283),n(554),n(555),n(212),n(94)),z=(n(179),n(30)),J=(n(127),n(40)),Q=n(556),G=function(e){var t=Object(c.useState)(!0),n=Object(j.a)(t,2),a=n[0];n[1];return a?i.a.createElement("div",{className:"loading"},i.a.createElement(Q.a,null)):null},K=(n(368),n(280));function W(){var e=Object(a.a)(["\n    mutation login($user: JSONObject) {\n      login(user: $user) {\n        success\n        message\n        data\n      }\n    }\n"]);return W=function(){return e},e}var Y=m()(W()),H={labelCol:{span:8},wrapperCol:{span:16}},X={wrapperCol:{offset:8,span:16}},Z=function(e){Object(p.a)();var t=Object(f.k)(),n=Object(p.c)(Y,{onCompleted:function(e){if(console.log("logged in",e),e&&e.login&&e.login.success){console.log("logged in",e.login);A(e.login),t.push("/")}else!function(e){var t=e.type,n=e.message;e.description;K.a[t]({message:n})}({type:"error",message:"Failed to login"})}}),a=Object(j.a)(n,2),r=a[0],c=a[1].loading;return i.a.createElement("div",{id:"page_login"},i.a.createElement(z.a,Object.assign({},H,{name:"basic",initialValues:{remember:!0},onFinish:function(e){console.log("on submit login"),r({variables:{user:e}})},onFinishFailed:function(e){console.log("Failed:",e)}}),i.a.createElement(z.a.Item,{label:"\u8d26\u53f7",name:"username",rules:[{required:!0,message:"Please input your username!"}]},i.a.createElement(J.a,null)),i.a.createElement(z.a.Item,{label:"\u5bc6\u7801",name:"password",rules:[{required:!0,message:"Please input your password!"}]},i.a.createElement(J.a.Password,null)),i.a.createElement(z.a.Item,Object.assign({},X,{name:"remember",valuePropName:"checked"}),i.a.createElement(L.a,null,"Remember me")),i.a.createElement(z.a.Item,X,i.a.createElement(h.a,{type:"primary",htmlType:"submit"},"\u767b\u5165"))),c?i.a.createElement(G,null):null)},ee=(n(133),n(88),n(549),n(279)),te=function(e){e.children;var t=Object(r.a)(e,["children"]);return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"page_01"},i.a.createElement(ee.a,t,e.children)))},ne=n(559),ae=(n(550),n(278)),re=(n(232),n(154)),ce=(n(233),n(106)),ie=n(107),oe=n(41),le=(n(234),n(86)),ue=(n(472),n(195)),se=n(558),de=n(557),me=(n(186),n(85)),fe=n(282),pe=(n(245),n(118)),ge=(n(479),n(196)),be=n(560),ve=n(561),he=n(562),Oe=n(262),ye=n.n(Oe),Ee=J.a.Search,je=i.a.createContext(),ke=function(e){e.index;var t=Object(r.a)(e,["index"]),n=z.a.useForm(),a=Object(j.a)(n,1)[0];return i.a.createElement(z.a,{form:a,component:!1},i.a.createElement(je.Provider,{value:a},i.a.createElement("tr",t)))},we=function(e){var t=e.title,n=e.editable,a=e.children,o=e.dataIndex,l=e.record,u=e.handleSave,s=e.isVariant,d=void 0!==s&&s,m=Object(r.a)(e,["title","editable","children","dataIndex","record","handleSave","isVariant"]),f=Object(c.useState)(!1),p=Object(j.a)(f,2),g=p[0],v=p[1],h=Object(c.useRef)(),O=Object(c.useContext)(je);Object(c.useEffect)((function(){g&&h.current.focus()}),[g]);var k=function(){v(!g),O.setFieldsValue(Object(b.a)({},o,l[o]))},w=function(){var e=Object(E.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.validateFields();case 3:n=e.sent,k(),u(Object(oe.a)({},l,{},n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Save failed:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=a;return d?x=g?i.a.createElement(z.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o},i.a.createElement(J.a,{ref:h,onPressEnter:w,onBlur:w})):i.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:k},a):n&&(x=g?i.a.createElement(z.a.Item,{style:{margin:0,width:"100%",height:"100%"},name:o,rules:[{required:!0,message:"".concat(t," is required.")}]},"price"==o?i.a.createElement(ge.a,{ref:h,min:0,step:1,formatter:function(e){return"$ ".concat(e).replace(/\B(?=(\d{3})+(?!\d))/g,",")},parser:function(e){return e.replace(/\$\s?|(,*)/g,"")},onPressEnter:w,onBlur:w}):"stock"==o?i.a.createElement(ge.a,{ref:h,min:0,step:1,onPressEnter:w,onBlur:w}):i.a.createElement(J.a,{ref:h,onPressEnter:w,onBlur:w})):i.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:k},a)),i.a.createElement("td",m,x)},xe=function(e){var t=e.productId,n=e.inventoryData,a=e.setInventoryData,o=e.productVariants,l=e.setProductVariants,u=Object(c.useState)([]),s=Object(j.a)(u,2),d=(s[0],s[1],Object(c.useState)(!1)),m=Object(j.a)(d,2),f=m[0],p=m[1],g=z.a.useForm(),v=Object(j.a)(g,1)[0],O=function(e){o[e];var t=Object(r.a)(o,[e].map(fe.a));l(t);var c=n.map((function(t){return delete t[e],t}));a(c)},y=function(e,t,r){r.preventDefault();var c=n.map((function(e){return e.key})).indexOf(e.key);a(ye()(n,Object(b.a)({},c,{published:{$set:t}})))},E=function(e){a(n.filter((function(t){return t.key!==e})))},k=function(e){var t=Object(ie.a)(n),r=t.findIndex((function(t){return e.key===t.key})),c=t[r];t.splice(r,1,Object(oe.a)({},c,{},e)),a(t)},w={body:{row:ke,cell:we}},I=function(){var e=[],t=Object.keys(o),a=[{title:"Price",dataIndex:"price",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.price-t.price}},{title:"Stock",dataIndex:"stock",editable:!0,width:100,fixed:"right",sorter:function(e,t){return e.stock-t.stock}},{title:"Published",dataIndex:"published",width:100,fixed:"right",align:"center",render:function(e,t){return i.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},i.a.createElement(re.a,{checkedChildren:"Active",unCheckedChildren:"Inactive",checked:t.published,onChange:function(e,n){y(t,e,n)}}))}},{title:"Add Variant",dataIndex:"operation",width:50,align:"center",fixed:"right",filterIcon:i.a.createElement(ne.a,null),filterDropdown:function(e){return i.a.createElement("div",{style:{padding:"10px",display:"flex"}},e.visible?i.a.createElement(Ee,{enterButton:i.a.createElement(be.a,null),onSearch:function(t){if(e.confirm(),t){var n="v"+(new Date).getTime();l(Object(oe.a)({},o,Object(b.a)({},n,t)))}}}):null)},render:function(e,t){return n.length>=1?i.a.createElement(pe.a,{title:"Sure to delete?",onConfirm:function(){return E(t.key)}},i.a.createElement("div",{style:{width:"100%",textAlign:"center",cursor:"pointer"}},i.a.createElement(ve.a,null))):null}}];return t&&t.length>0&&t.map((function(t){e.push({title:o[t],dataIndex:t,editable:!0,isVariant:!0,width:150,ellipsis:!0,sorter:function(e,n){return e[t]>n[t]?-1:n[t]>e[t]?1:0},filterIcon:i.a.createElement(he.a,null),filterDropdown:function(e){return i.a.createElement("div",{style:{padding:"10px",display:"flex"}},e.visible?i.a.createElement(i.a.Fragment,null,i.a.createElement(Ee,{enterButton:i.a.createElement(be.a,null),defaultValue:o[t],onSearch:function(n){return function(n){e.confirm(),l(Object(oe.a)({},o,Object(b.a)({},t,n)))}(n)}}),i.a.createElement(pe.a,{title:"Sure to delete?",onConfirm:function(){e.confirm(),O(t)}},i.a.createElement(h.a,{type:"danger",icon:i.a.createElement(ve.a,null),style:{marginLeft:"5px"}}))):null)},onFilter:function(){console.log("on filter ok")}})})),e.concat(a)}().map((function(e){return e.editable?Object(oe.a)({},e,{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,isVariant:e.isVariant,handleSave:k}}}):e}));return i.a.createElement("div",{className:"inventoryTable-main"},i.a.createElement(h.a,{onClick:function(){var e={key:(new Date).getTime(),_id:null,price:0,stock:0,published:!1,productId:t};if(n.length>0){var c=n[n.length-1],i=(c.key,c._id,c.published,Object(r.a)(c,["key","_id","published"]));e=Object(oe.a)({},e,{},i)}a([].concat(Object(ie.a)(n),[e]))},type:"primary",style:{marginRight:16,marginBottom:16},disabled:!(n.length<20),icon:i.a.createElement(ne.a,null)},"Item"),i.a.createElement(me.a,{components:w,rowClassName:function(){return"editable-row"},bordered:!0,dataSource:n,columns:I,size:"small",pagination:!1,scroll:{x:150*(I.length-4)}}),i.a.createElement(z.a,{form:v},i.a.createElement(x.a,{title:"New Variant",width:300,bodyStyle:{paddingBottom:0},visible:f,onOk:function(){var e=v.getFieldValue();if(e&&e.variantName){var t="v"+(new Date).getTime();l(Object(oe.a)({},o,Object(b.a)({},t,e.variantName))),v.resetFields()}p(!1)},onCancel:function(){p(!1)}},i.a.createElement(z.a.Item,{name:"variantName",rules:[{required:!0,message:"Name is required."}]},i.a.createElement(J.a,{maxLength:8})))))},Ie=n(193),_e=n(73),Ce=n(189),Se=n(190);function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=new Ce.a({addTypename:!1}),n=new _e.c({cache:t,link:new Se.a({uri:e||"http://13.124.162.243/graphql",credentials:"include"})});return{client:n,cache:t,query:function(){var e=Object(E.a)(y.a.mark((function e(t){var a,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.query({variables:a,query:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mutation:function(){var e=Object(E.a)(y.a.mark((function e(t){var a,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",new Promise((function(e,r){n.mutate({variables:a,mutation:t}).then((function(t){e(t)})).catch((function(e){r(e)}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}function Pe(){var e=Object(a.a)(["\n  mutation qiniuBatchDelete($images: [String!]) {\n    qiniuBatchDelete(images: $images) {\n      success\n      message\n      data\n    }\n  }\n"]);return Pe=function(){return e},e}function $e(){var e=Object(a.a)(["\n  {\n    qiniuToken {\n      success\n      message\n      data\n    }\n  }\n"]);return $e=function(){return e},e}function De(){var e=Object(a.a)(["\n  {\n    qiniu @client {\n      success\n      message\n      data\n    }\n  }\n"]);return De=function(){return e},e}m()(De());var qe=m()($e()),Ae=m()(Pe()),Fe=function(){var e=Object(E.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ne(),e.next=3,t.query(qe).then((function(e){return e})).catch((function(e){}));case 3:return n=e.sent,e.abrupt("return",{upload:function(){var e=Object(E.a)(y.a.mark((function e(t){var a,r,c,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.originFileObj,r={useCdnDomain:!0,region:Ie.region.z0},c={fname:"",params:{},mimeType:["image/png","image/jpeg","image/gif"]},i=t.name,e.abrupt("return",new Promise((function(e,t){if(console.log("qiniuToken",n),n){var o=n.data.qiniuToken;if(o.success){var l=o.data;Ie.upload(a,i,l,c,r).subscribe({next:function(e){console.log("next(res)",e)},error:function(e){console.log("error(err)",e),t(e)},complete:function(t){console.log("complete(res)",t),e(t)}})}}else t("Error getting token")})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),batchDelete:function(){var e=Object(E.a)(y.a.mark((function e(n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){t.mutation(Ae,{images:n}).then((function(t){return e(t)})).catch((function(e){console.log(e),a(e)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ue(){var e=Object(a.a)(["\n  mutation updateProduct($product: JSONObject!) {\n    updateProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return Ue=function(){return e},e}function Te(){var e=Object(a.a)(["\n  mutation deleteProduct($_id: String!) {\n    deleteProduct(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return Te=function(){return e},e}function Ve(){var e=Object(a.a)(["\n  mutation createProduct($product: JSONObject!) {\n    createProduct(product: $product) {\n      success\n      message\n      data\n    }\n  }\n"]);return Ve=function(){return e},e}function Be(){var e=Object(a.a)(["\n  mutation bulkUpdateInventory($inventory: [JSONObject!]) {\n    bulkUpdateInventory(inventory: $inventory) {\n      success\n      message\n      data\n    }\n  }\n"]);return Be=function(){return e},e}function Re(){var e=Object(a.a)(["\n  query inventory($filter: JSONObject) {\n    inventory(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return Re=function(){return e},e}var Me=ue.a.Panel,Le=le.a.Option,ze=m()(Re()),Je=m()(Be()),Qe=m()(Ve()),Ge=m()(Te()),Ke=m()(Ue()),We=function(){var e=Object(E.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return n=e.sent,a=n.imageSrc,e.abrupt("return",t.map((function(e){return e.uid=e.name,e.url=a+e.name,e.thumbUrl=a+e.name,e.fav,e})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],a=[],r=[],c=[];return t.map((function(e,t){var r=e.name;if(e.originFileObj){var i=r.split(".");r="saas_".concat(t,"_").concat((new Date).getTime(),"_").concat(i[i.length-2],".").concat(i[i.length-1]),e.name=r,n.push(e)}else a.push(e);c.push({name:r,fav:!!e.fav&&e.fav})})),e.map((function(e){a.map((function(e){return e.name})).indexOf(e.name)<0&&r.push(e)})),{upload:n,delete:r,allImages:c,uploaded:e}};function He(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))}var Xe=function(e){var t=e.product,n=void 0===t?null:t,a=e.categories,o=e.refetch,l=Object(r.a)(e,["product","categories","refetch"]),u=z.a.useForm(),s=Object(j.a)(u,1)[0],d=Object(c.useState)([]),m=Object(j.a)(d,2),f=m[0],g=m[1],b=Object(c.useState)(!1),v=Object(j.a)(b,2),O=v[0],k=v[1],w=Object(c.useState)(null),I=Object(j.a)(w,2),C=I[0],S=I[1],N=Object(c.useState)([]),P=Object(j.a)(N,2),$=P[0],D=P[1],q=Object(c.useState)(a),A=Object(j.a)(q,2),F=A[0],U=A[1],T=Object(c.useState)(""),V=Object(j.a)(T,2),B=V[0],R=V[1],M=Object(c.useState)({sku:"SKU"}),L=Object(j.a)(M,2),Q=L[0],G=L[1];Object(c.useEffect)((function(){if(n&&l.modalVisible){var e=Object.assign({},n);if(n.category&&n.category.length>0){var t=n.category.map((function(e){return{key:e._id,label:e.name}}));e.category=t}if(s.setFieldsValue(e),n.variants&&G(n.variants),Z({variables:{filter:{filter:{productId:n._id}}}}),n.images&&n.images.length>0)(function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=g,e.next=3,We(n.images);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}else s.resetFields();l.setModalFooter(Ie())}),[n,l.modalVisible]);var K=i.a.createElement("div",null,i.a.createElement(ne.a,null),i.a.createElement("div",{className:"ant-upload-text"},"Upload")),W=function(){var e=[].concat(f);e.map((function(e){return e.name==C.name?e.fav=!0:e.fav=!1,e})),g(e)},Y=function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,He(t.originFileObj);case 3:t.preview=e.sent;case 4:k(!0),S(t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=Object(p.b)(ze,{fetchPolicy:"cache-and-network",onCompleted:function(e){if(console.log("readInventory result",e),e&&e.inventory){var t=[];e.inventory.map((function(e,n){var a=e.variants,c=Object(r.a)(e,["variants"]),i=Object(oe.a)({},c,{},a,{key:c._id});t.push(i)})),console.log("flattenedInventory",t),D(t)}}}),X=Object(j.a)(H,2),Z=X[0],ee=X[1],te=Object(p.c)(Je,{onCompleted:function(e){console.log("bulkUpdateInventory result",e)}}),me=Object(j.a)(te,1)[0],fe=Object(p.c)(Qe,{onCompleted:function(e){console.log("createProduct result",e),l.onCancel(),o()}}),pe=Object(j.a)(fe,2),ge=pe[0],be=(pe[1],Object(p.c)(Ge,{onCompleted:function(e){console.log("deleteProduct result",e),l.onCancel(),o()}})),ve=Object(j.a)(be,1)[0],he=Object(p.c)(Ke,{onCompleted:function(e){console.log("updateProduct result",e),l.onCancel(),o()}}),Oe=Object(j.a)(he,2),ye=Oe[0],Ee=(Oe[1],function(){var e=Object(E.a)(y.a.mark((function e(t){var a,c,i,o,l,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("onFinish",t),a=Object(oe.a)({},t,{images:[],variants:Q}),t._id||delete a._id,t.category?(c=F.find((function(e){return e._id==t.category.key})))&&(a.category=[c]):a.category=[],((i=Ye(n&&n.images?n.images:[],f)).upload.length>0||i.delete.length>0)&&(a.images=i.allImages),e.next=8,Fe();case 8:if(o=e.sent,i.upload.length>0&&i.upload.map(function(){var e=Object(E.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.upload(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),!(i.delete.length>0)){e.next=13;break}return e.next=13,o.batchDelete(i.delete.map((function(e){return e.name})));case 13:n?(ye({variables:{product:Object(oe.a)({},a,{_id:n._id})}}),l=(l=Object(ie.a)($)).map((function(e){e.key;var t=Object(r.a)(e,["key"]),n={};return Object.keys(Q).map((function(e){t.hasOwnProperty(e)&&(n[e]=t[e],delete t[e])})),t.variants=n,t})),console.log("newInventory",l),u=[],ee.data&&ee.data.inventory&&ee.data.inventory.map((function(e){l.map((function(e){return e._id})).indexOf(e._id)<0&&u.push(Object(oe.a)({},e,{deleted:!0}))})),me({variables:{inventory:l.concat(u)}})):ge({variables:{product:a}});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),je=function(){_("confirm","Confirm delete?",Object(E.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.images&&n.images.length>0)){e.next=6;break}return e.next=3,Fe();case 3:return t=e.sent,e.next=6,t.batchDelete(n.images.map((function(e){return e.name})));case 6:ve({variables:{_id:n._id}});case 7:case"end":return e.stop()}}),e)}))))},ke=function(e){R(e.target.value)},we=function(){U([].concat(Object(ie.a)(F),[{_id:"category_".concat(B,"_").concat((new Date).getTime()),name:B}])),R("")},Ie=function(){var e=[i.a.createElement(h.a,{key:"cancel",onClick:l.onCancel},"Cancel"),i.a.createElement(h.a,{key:"submit",type:"primary",onClick:function(){s.submit()}},"Save")];return n&&e.unshift(i.a.createElement(h.a,{key:"delete",type:"danger",onClick:je},"Delete")),e};return i.a.createElement("div",{id:"productForm"},i.a.createElement(ue.a,{defaultActiveKey:["1","2"],expandIconPosition:"right"},i.a.createElement(Me,{header:"Product Information",key:"1"},i.a.createElement(z.a,{name:"complex-form",form:s,onFinish:Ee,labelCol:{span:5},wrapperCol:{span:16}},i.a.createElement(z.a.Item,{name:"_id",label:"ID"},i.a.createElement(J.a,null)),i.a.createElement(z.a.Item,{name:"name",label:"Name",rules:[{required:!0}]},i.a.createElement(J.a,null)),i.a.createElement(z.a.Item,{name:"description",label:"Description"},i.a.createElement(J.a.TextArea,{rows:4})),i.a.createElement(z.a.Item,{name:"category",label:"Category"},i.a.createElement(le.a,{style:{width:240},placeholder:"Select a category",labelInValue:!0,allowClear:!0,dropdownRender:function(e){return i.a.createElement("div",null,e,i.a.createElement(ce.a,{style:{margin:"4px 0"}}),i.a.createElement("div",{style:{display:"flex",flexWrap:"nowrap",padding:8}},i.a.createElement(J.a,{style:{flex:"auto"},value:B,onChange:ke,required:!0}),i.a.createElement("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},onClick:we},i.a.createElement(ne.a,null)," New")))}},F.map((function(e,t){return i.a.createElement(Le,{key:e._id,value:e._id},e.name)})))),i.a.createElement(z.a.Item,{name:"published",label:"Published",valuePropName:"checked"},i.a.createElement(re.a,{checkedChildren:"Active",unCheckedChildren:"Inactive"})),i.a.createElement(z.a.Item,{name:"images",label:"Images"},i.a.createElement(i.a.Fragment,null,i.a.createElement(ae.a,{accept:"image/*",beforeUpload:function(e){return console.log("beforeUpload",e),!1},listType:"picture-card",multiple:!0,fileList:f,onPreview:Y,onChange:function(e){var t=e.fileList;Object(r.a)(e,["fileList"]);console.log("handleFileListChange,fileList",t);var n=t.map((function(e){return e.fav,e}));(t.length>4&&(n=t.slice(0,3)),n.length>0)&&(n.find((function(e){return e.fav}))||(n[0].fav=!0));g(n)},className:"productForm-upload"},f.length<4?K:null),i.a.createElement(x.a,{visible:O,footer:function(){var e=C&&C.fav;return i.a.createElement(h.a,{type:e?"primary":"default",icon:e?i.a.createElement(se.a,{style:{color:"gold"}}):i.a.createElement(de.a,null),onClick:W},"Favourite")}(),onCancel:function(){k(!1)}},i.a.createElement("img",{alt:"example",style:{width:"100%"},src:C?C.url||C.thumbUrl:""})))))),n?i.a.createElement(Me,{header:"Pricing & Variants",key:"2"},i.a.createElement(xe,{productId:n._id,inventoryData:$,setInventoryData:D,productVariants:Q,setProductVariants:G})):null))},Ze=function(e){var t=e.product,n=e.categories,a=void 0===n?[]:n,r=e.modalVisible,o=e.refetch,l=e.closeModal,u=Object(c.useState)([]),s=Object(j.a)(u,2),d=s[0],m=s[1],f={};return d&&(f.footer=d),i.a.createElement(x.a,Object.assign({title:t?t.name:"New Product",width:"95%",visible:r,onCancel:l,destroyOnClose:!0,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},f),i.a.createElement(Xe,{product:t,categories:a,refetch:o,modalVisible:r,onCancel:l,setModalFooter:m}))},et=(n(244),n(108));function tt(){var e=Object(a.a)(["\n  query products($filter: JSONObject) {\n    products(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return tt=function(){return e},e}m()(tt());var nt=n(551);function at(){var e=Object(a.a)(["\n  mutation updateInventoryPublish($ids: [String!], $published: Boolean!) {\n    updateInventoryPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return at=function(){return e},e}function rt(){var e=Object(a.a)(["\n  mutation updateProductPublish($ids: [String!], $published: Boolean!) {\n    updateProductPublish(ids: $ids, published: $published) {\n      success\n      message\n      data\n    }\n  }\n"]);return rt=function(){return e},e}function ct(){var e=Object(a.a)(["\n  query inventory($filter: JSONObject) {\n    inventory(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      price\n      stock\n      variants\n      published\n      productId\n    }\n  }\n"]);return ct=function(){return e},e}function it(){var e=Object(a.a)(["\n  query products($filter: JSONObject) {\n    products(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      name\n      description\n      category\n      variants\n      published\n      images\n    }\n  }\n"]);return it=function(){return e},e}var ot=m()(it()),lt=m()(ct()),ut=m()(rt()),st=m()(at()),dt=function(e){var t=[];return e.map((function(e){e.category&&e.category.length>0&&e.category.map((function(e){t.find((function(t){return t._id==e._id}))||t.push(e)}))})),t},mt=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),u=l[0],s=l[1],d=Object(c.useState)([]),m=Object(j.a)(d,2),f=m[0],g=m[1],b=Object(c.useState)(!1),v=Object(j.a)(b,2),O=v[0],y=v[1],E=Object(p.d)(ot,{fetchPolicy:"cache-and-network",variables:{},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),k=E.data,w=(E.loading,E.error),x=E.refetch,I=Object(p.d)(lt,{fetchPolicy:"cache-and-network",onError:function(e){console.log("inventoryData error",e)},onCompleted:function(e){}}),_=I.data,C=(I.loading,I.error),S=I.refetch,N=Object(p.c)(ut,{onCompleted:function(e){console.log("updateInventoryPublish result",e),x()}}),P=Object(j.a)(N,1)[0],$=Object(p.c)(st,{onCompleted:function(e){console.log("updateInventoryPublish result",e),S()}}),D=Object(j.a)($,1)[0];Object(c.useEffect)((function(){f.length>0?O||y(!0):O&&y(!1)}),[f.length]);var q=function(e){r(!0),s(e)},A=[{title:"No.",dataIndex:"index",width:75,render:function(e,t,n){return n+1+"."}},{title:"Created At",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(nt.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Name",dataIndex:"name",render:function(e,t){var n=t.name?i.a.createElement(h.a,{type:"link",onClick:function(){q(t)}},t.name):null;if(!n){var a="";if(t.variants){var r=Object.keys(t.variants);r.map((function(e,n){a+="".concat(t.variants[e]," ").concat(n==r.length-1?"":"/ ")}))}else a="-";n=a}return n}},{title:"Price",dataIndex:"price",render:function(e,t){var n=t.price;return n||(n="-"),n}},{title:"Stock",dataIndex:"stock",sorter:function(e,t){return e.stock&&t.stock?e.stock-t.stock:0},render:function(e,t){var n=t.stock;if(!n)if(t.children&&t.children.length>0){var a=0;t.children.map((function(e){a+=e.stock})),n=a}else n="-";return n}},{title:"Published",dataIndex:"published",render:function(e,t){return t.published?i.a.createElement(et.a,{color:"green"},"Active"):i.a.createElement(et.a,{color:"red"},"Inactive")}}],F={onChange:function(e,t){g(t)},onSelect:function(e,t,n){},onSelectAll:function(e,t,n){}};f.length;return i.a.createElement(te,{title:"Inventory",extra:[i.a.createElement(h.a,{key:"create",type:"primary",icon:i.a.createElement(ne.a,null),onClick:function(){q(null)}})]},i.a.createElement(me.a,{columns:A,rowSelection:F,dataSource:function(){var e=[];if(k&&_&&!w&&!C){var t=_.inventory.map((function(e){return Object(oe.a)({},e,{key:e._id})}));k.products.map((function(n,a){var r=t.filter((function(e){return e.productId==n._id}));n.key=n._id,r.length>0&&(n.children=r),e.push(n)}))}return e}(),pagination:!1,scroll:{x:150*A.length},size:"small"}),i.a.createElement("div",{className:"inventory-selectionPanel ".concat(O?"open":"close")},function(){var e=[],t=[];f.map((function(n){n.productId&&""!=n.productId?e.push(n._id):t.push(n._id)}));return i.a.createElement("div",{style:{display:"flex"}},i.a.createElement(h.a,{type:"primary",size:"small",onClick:function(){e.length>0&&D({variables:{ids:e,published:!0}}),t.length>0&&P({variables:{ids:t,published:!0}})},style:{marginRight:"5px"},disabled:!O},"Publish"),i.a.createElement(h.a,{size:"small",onClick:function(){e.length>0&&D({variables:{ids:e,published:!1}}),t.length>0&&P({variables:{ids:t,published:!1}})},disabled:!O},"Unpublish"))}()),i.a.createElement(Ze,{product:u,categories:k&&k.products?dt(k.products):[],refetch:function(){x(),S()},modalVisible:a,closeModal:function(){r(!1)}}))},ft=(n(539),n(194)),pt=(n(541),n(67)),gt=(n(543),n(162)),bt=(n(230),n(152)),vt=function(e){var t=e.order,n=e.closeModal,a=e.visible,o=(Object(r.a)(e,["order","closeModal","visible"]),Object(c.useState)(null)),l=Object(j.a)(o,2),u=l[0],s=l[1];Object(c.useEffect)((function(){(function(){var e=Object(E.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s,e.next=3,T();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return i.a.createElement(x.a,{title:"Order",width:"95%",visible:a,onCancel:n,footer:null,wrapClassName:"products-modalWrapper",style:{overflow:"hidden"}},t?i.a.createElement(i.a.Fragment,null,i.a.createElement(ce.a,{orientation:"left"},"\u8ba2\u5355"),i.a.createElement(pt.a,{size:"small",bordered:!0,column:{xxl:2,xl:2,lg:2,md:2,sm:1,xs:1}},i.a.createElement(pt.a.Item,{label:"\u7f16\u53f7"},t._id),i.a.createElement(pt.a.Item,{label:"\u8ba2\u8d2d\u65e5\u671f"},Object(nt.a)(new Date(t.createdAt),"MM/dd/yyyy hh:mm:ss aa")),i.a.createElement(pt.a.Item,{label:"\u4ed8\u6b3e\u72b6\u6001"},t.paid?i.a.createElement("span",{style:{color:"green"}},"\u5df2\u4ed8\u6b3e"):i.a.createElement("span",{style:{color:"red"}},"\u5f85\u4ed8\u6b3e")),i.a.createElement(pt.a.Item,{label:"\u8d27\u7269\u72b6\u6001"},t.sentOut?i.a.createElement("span",{style:{color:"green"}},"\u5df2\u51fa\u8d27 ",i.a.createElement("small",null," (\u8fd0\u5355\u53f7: ",t.trackingNum,")")):i.a.createElement("span",{style:{color:"red"}},"\u672a\u51fa\u8d27"))),i.a.createElement(ce.a,{orientation:"left"},"\u6536\u4ef6\u4eba"),i.a.createElement(pt.a,{id:"buyerInfoTable",size:"small",bordered:!0,column:{xxl:1,xl:1,lg:1,md:1,sm:1,xs:1}},i.a.createElement(pt.a.Item,{label:"\u540d\u5b57"},t.customer.name),i.a.createElement(pt.a.Item,{label:"\u7535\u8bdd\u53f7\u7801"},"contact"),i.a.createElement(pt.a.Item,{label:"\u6536\u4ef6\u5730\u5740"},"address")),i.a.createElement(ce.a,{orientation:"left"},"\u8d2d\u4e70\u5217\u8868"),i.a.createElement(gt.a,{itemLayout:"horizontal",dataSource:t.items,renderItem:function(e){console.log("config",u);var t=e.product.name,n="",a=Object.keys(e.variant);a.map((function(t,r){n+="".concat(t,": ").concat(e.variant[t]).concat(r==a.length-1?"":", ")}));var r="";return u&&e.product.image&&(r=u.imageSrc+e.product.image),i.a.createElement(gt.a.Item,{actions:["qty: "+e.qty,"price: "+e.price]},i.a.createElement(gt.a.Item.Meta,{avatar:i.a.createElement(bt.a,{shape:"square",src:r}),title:t,description:n}))},footer:i.a.createElement("div",{className:"orderInfo-item-summary"},"Total: ",t.total)})):"Not found")};function ht(){var e=Object(a.a)(["\n  mutation cancelOrder($_id: String!) {\n    cancelOrder(_id: $_id) {\n      success\n      message\n      data\n    }\n  }\n"]);return ht=function(){return e},e}function Ot(){var e=Object(a.a)(["\n  mutation updateOrderDelivery($_id: String!, $trackingNum: String) {\n    updateOrderDelivery(_id: $_id, trackingNum: $trackingNum) {\n      success\n      message\n      data\n    }\n  }\n"]);return Ot=function(){return e},e}function yt(){var e=Object(a.a)(["\n  mutation updateOrderPayment($_id: String!, $paid: Boolean!) {\n    updateOrderPayment(_id: $_id, paid: $paid) {\n      success\n      message\n      data\n    }\n  }\n"]);return yt=function(){return e},e}function Et(){var e=Object(a.a)(["\n  query orders($filter: JSONObject) {\n    orders(filter: $filter) {\n      _id\n      createdAt\n      updatedAt\n      items\n      total\n      customer\n      paid\n      sentOut\n      trackingNum\n    }\n  }\n"]);return Et=function(){return e},e}var jt=ft.a.TabPane,kt=J.a.Search,wt=m()(Et()),xt=m()(yt()),It=m()(Ot()),_t=m()(ht()),Ct=function(e){var t=Object(c.useState)(!1),n=Object(j.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(j.a)(o,2),u=l[0],s=l[1],d=Object(p.d)(wt,{fetchPolicy:"cache-and-network",variables:{filter:{sorter:{createdAt:"desc"}}},onError:function(e){console.log("products error",e)},onCompleted:function(e){}}),m=d.data,f=(d.loading,d.error,d.refetch),g=Object(p.c)(xt,{onCompleted:function(e){console.log("updateOrderPayment result",e),f()}}),b=Object(j.a)(g,2),v=b[0],O=(b[1],Object(p.c)(It,{onCompleted:function(e){console.log("updateOrderDelivery result",e),f()}})),y=Object(j.a)(O,2),E=y[0],k=(y[1],Object(p.c)(_t,{onCompleted:function(e){console.log("updateOrderDelivery result",e),f()}})),w=Object(j.a)(k,2),x=w[0],I=(w[1],[{title:"No.",dataIndex:"index",key:"index",width:75,render:function(e,t,n){return"".concat(n+1,".")}},{title:"\u8ba2\u8d2d\u65e5\u671f",dataIndex:"createdAt",key:"createdAt",sorter:function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)},render:function(e,t){return Object(nt.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"\u8ba2\u5355\u7f16\u53f7",dataIndex:"_id",key:"_id",render:function(e,t){return i.a.createElement("a",{style:{whiteSpace:"pre-wrap",textDecoration:"underline"},onClick:function(){!function(e){r(!0),console.log("selectedOrder",e),s(e)}(t)}},t._id.toUpperCase())}},{title:"\u6536\u8d27\u4eba",dataIndex:"customer",key:"customer",sorter:function(e,t){return e.name-t.name},render:function(e,t){return e.name}},{title:"\u603b\u8ba1",dataIndex:"total",key:"total",sorter:function(e,t){return e.total-t.total}}]),_=(i.a.createElement("div",null,"\u7a7a\u7a7a\u5982\u4e5f"),{newOrders:[].concat(I,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return i.a.createElement(h.a,{size:"small",type:"".concat(e?"primary":"danger"),onClick:function(){console.log("handleUpdatePayment",t),v({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"",dataIndex:"action",key:"action",render:function(e,t){return i.a.createElement(pe.a,{title:"Sure to delete?",onConfirm:function(){x({variables:{_id:t._id}})}},i.a.createElement(h.a,{type:"danger",size:"small"},"\u53d6\u6d88"))}}]),paidOrders:[].concat(I,[{title:"\u4ed8\u6b3e\u72b6\u6001",dataIndex:"paid",key:"paid",render:function(e,t){return i.a.createElement(h.a,{type:"".concat(e?"primary":"danger"),size:"small",onClick:function(){console.log("handleUpdatePayment",t),v({variables:{_id:t._id,paid:!t.paid}})}},e?"\u5df2\u4ed8\u6b3e":"\u672a\u4ed8\u6b3e")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",width:200,render:function(e,t){return t.sentOut&&e?i.a.createElement("div",null,e):i.a.createElement(kt,{placeholder:"Enter tracking no.",enterButton:i.a.createElement(be.a,null),size:"small",onSearch:function(e){E({variables:{_id:t._id,trackingNum:e}})}})}}]),completedOrders:[].concat(I,[{title:"Last Updated",dataIndex:"updatedAt",key:"updatedAt",sorter:function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)},render:function(e,t){return Object(nt.a)(new Date(e),"MM/dd/yyyy hh:mm:ss aa")}},{title:"Tracking No.",dataIndex:"trackingNum",key:"trackingNum",render:function(e,t){return e}}])}),C=function(){var e=m?m.orders:[],t=[],n=[],a=[];return e.map((function(e){e.paid||e.sentOut?e.paid&&!e.sentOut?n.push(e):e.paid&&e.sentOut&&a.push(e):t.push(e)})),{newOrders:t,paidOrders:n,completedOrders:a}}();return i.a.createElement(te,{title:"Orders"},i.a.createElement(ft.a,{defaultActiveKey:"1"},i.a.createElement(jt,{tab:"New Orders",key:"1"},i.a.createElement(me.a,{rowKey:"_id",columns:_.newOrders,dataSource:C.newOrders,pagination:!1,size:"small",scroll:{x:100*_.newOrders.length},footer:null})),i.a.createElement(jt,{tab:"Paid Orders",key:"2"},i.a.createElement(me.a,{rowKey:"_id",columns:_.paidOrders,dataSource:C.paidOrders,pagination:!1,size:"small",scroll:{x:100*_.paidOrders.length},footer:null})),i.a.createElement(jt,{tab:"Completed Orders",key:"3"},i.a.createElement(me.a,{rowKey:"_id",columns:_.completedOrders,dataSource:C.completedOrders,pagination:!1,size:"small",scroll:{x:100*_.completedOrders.length},footer:null}))),i.a.createElement(vt,{order:u,visible:a,closeModal:function(){r(!1)}}))};function St(){var e=Object(a.a)(["\n  {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return St=function(){return e},e}var Nt=m()(St()),Pt=function(e){var t=e.component,n=Object(r.a)(e,["component"]),a=Object(f.l)(),c=Object(p.d)(Nt),o=!1;if(c){var l=c.error,u=c.loading,s=Object(r.a)(c,["error","loading"]);u||l||(o=!(l||u||!s.data||!s.data.user||!s.data.user.success))}return i.a.createElement(f.d,Object.assign({},n,{render:function(e){return o?i.a.createElement(t,e):i.a.createElement(f.c,{to:{pathname:"/login",state:{from:a}}})}}))};function $t(){var e=Object(a.a)(["\n  {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return $t=function(){return e},e}var Dt=m()($t()),qt=function(e){var t=e.component,n=e.restricted,a=Object(r.a)(e,["component","restricted"]),c=Object(p.d)(Dt),o=c.data,l=c.error,u=!1;return l||(u=!(l||!o||!o.user||!o.user.success)),i.a.createElement(f.d,Object.assign({},a,{render:function(e){return u&&n?i.a.createElement(f.c,{to:"/"}):i.a.createElement(t,e)}}))},At=function(){return i.a.createElement("div",null,"404: Page Not Found")};function Ft(){var e=Object(a.a)(["\n  {\n    user @client {\n      success\n      message\n      data {\n        _id\n        username\n        configId\n      } \n    }\n  }\n"]);return Ft=function(){return e},e}var Ut=g,Tt=M,Vt=m()(Ft()),Bt=function(e){var t=Object(p.d)(Vt),n=!!(t&&t.data&&t.data.user&&t.data.user.success),a=function(){return i.a.createElement("div",null,"Main")};return i.a.createElement(Ut,{header:n?i.a.createElement(Tt,null):null,footer:n?"2020":null},i.a.createElement(f.g,null,i.a.createElement(Pt,{exact:!0,path:"/",component:mt}),i.a.createElement(Pt,{exact:!0,path:"/main",component:a}),i.a.createElement(Pt,{exact:!0,path:"/orders",component:Ct}),i.a.createElement(Pt,{exact:!0,path:"/configuration",component:a}),i.a.createElement(qt,{restricted:!0,exact:!0,path:"/login",component:Z}),i.a.createElement(f.d,{component:At})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Rt(){var e=Object(a.a)(["\n  query userConfig($configId: String!) {\n    userConfig(configId: $configId) {\n        success\n        message\n        data\n    }\n  }\n"]);return Rt=function(){return e},e}function Mt(){var e=Object(a.a)(["\n  query loggedInUser{\n    loggedInUser{\n        success\n        message\n        data\n    }\n  }\n"]);return Mt=function(){return e},e}var Lt=Ne(),zt=t.default=Lt,Jt=Lt.client,Qt=Lt.cache,Gt=Object(r.a)(Lt,["client","cache"]),Kt=i.a.createElement(s.BrowserRouter,null,i.a.createElement(u.a,{client:Jt},i.a.createElement(Bt,null))),Wt=m()(Mt()),Yt=m()(Rt());!function(){var e={data:{user:null,config:null}};Gt.query(Wt).then((function(t){var n=t.data,a=null;n&&n.loggedInUser&&(a=n.loggedInUser),e={data:{user:a,config:null}},Gt.query(Yt,{configId:a.data.configId}).then((function(t){var n=t.data;n.userConfig.success&&(e={data:{user:a,config:n.userConfig.data}}),Qt.writeData(e),l.a.render(Kt,document.getElementById("root"))})).catch((function(t){Qt.writeData(e),l.a.render(Kt,document.getElementById("root")),console.log("GET_USERCONFIG error",t)}))})).catch((function(t){console.log("get logged user error",t),Qt.writeData(e),l.a.render(Kt,document.getElementById("root"))}))}(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[285,1,2]]]);
//# sourceMappingURL=main.c59e4472.chunk.js.map